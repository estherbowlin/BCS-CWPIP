// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/geoenrichment/SelectableTree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented ./when dojo/store/util/QueryResults dojo/store/util/SimpleQueryEngine dstore/QueryResults".split(" "),function(m,h,k,f,d,b,e,c){var g=function(a,b){this.storage=a;this.data=b};g.prototype={storage:null,data:null,filter:function(a){return this.storage._filter(this.data,a)},sort:function(a,b){return this.storage._sort(this.data,a,b)},fetch:function(){return this.storage._fetchRange(this.data)},
fetchRange:function(a){return this.storage._fetchRange(this.data,a)},mayHaveChildren:function(a){return this.storage.mayHaveChildren(a)},getChildren:function(a){return this.storage.getChildren(a,{returnCollection:!0})}};return m(f,{idProperty:"id",bindingProperty:null,autoIdentify:!0,queryEngine:e,isDstoreTree:!1,root:null,data:null,_hash:null,_autoId:null,storage:null,constructor:function(a,b){h.mixin(this,b);this.storage=this;this.root={children:a||[]};h.mixin(this._provideBinding(this.root),{deepness:-1,
selectCount:0,leafCount:0});this._hash={};this.idProperty&&this.autoIdentify&&(this._autoId=1);this._initializeNode(this.root,0);this.data=this.root.children},_provideBinding:function(a){var b=this._getBinding(a);b||(a[this.bindingProperty]=b={});return b},_getBinding:function(a){return this.bindingProperty?a[this.bindingProperty]:a},_initializeNode:function(a,b){var c=this._provideBinding(a);c.selected=!!c.selected;a.children?(c.selectCount=0,c.leafCount=0,k.forEach(a.children,function(l){this._registerNode(l);
var d=this._provideBinding(l);d.parent=a;d.deepness=b;this._initializeNode(l,b+1);c.selectCount+=d.selectCount;c.leafCount+=d.leafCount},this),c.selectCount)?c.selectCount===c.leafCount&&(c.selected=!0):c.selected=!1:("number"!==typeof c.leafCount&&(c.leafCount=1),c.selectCount=c.selected?c.leafCount:0)},isOwned:function(a,b){return b||a!==this.root?this.get(this.getIdentity(a))===a:!0},_registerNode:function(a){this._autoId&&void 0===a[this.idProperty]&&(a[this.idProperty]=this._autoId++);this.idProperty&&
(this._hash[a[this.idProperty]]=a)},_unregisterNode:function(a){this.isOwned(a,!0)&&delete this._hash[a[this.idProperty]]},clear:function(){this.root.children.length&&(k.forEach(this.root.children,function(a){this._unbindNode(a)},this),this.data=this.root.children=[])},destroy:function(){this.clear()},_unbindNode:function(a){a.children&&k.forEach(a.children,function(a){delete this._getBinding(a).parent;this._unbindNode(a)},this);this._unregisterNode(a);var b=this._getBinding(a);b.parent&&(this._incrementCounts(b.parent,
-b.selectCount,-b.leafCount),delete b.parent);b!==a&&delete a[this.bindingProperty]},removeNodes:function(a,b){k.forEach(a&&a.slice(),function(a){if(this.isOwned(a,!0)){var b=this._getBinding(a).parent,c=k.indexOf(b.children,a);0<=c&&b.children.splice(c,1);this._unbindNode(a)}},this);!b&&this.emit("updated")},addNodes:function(a,b,c){if(!b)b=this.root;else if(!this.isOwned(b)||!b.children)return!1;var l=this._getBinding(b).deepness+1,d=0,g=0;k.forEach(a,function(a){if(!this.isOwned(a)){b.children.push(a);
this._registerNode(a);var c=this._provideBinding(a);c.parent=b;c.deepness=l;this._initializeNode(a,l+1);d+=c.selectCount;g+=c.leafCount}},this);this._incrementCounts(b,d,g);!c&&this.emit("updated");return!0},select:function(a,b){return this.changeSelect(a,!0,b)},deselect:function(a){this.changeSelect(a,!1)},changeSelect:function(a,b,c){c=c||this.root.leafCount;var l=a&&this._getBinding(a);if(l){b=!!b;var d=(b?l.leafCount:0)-l.selectCount,g=0>d||this.root.selectCount+d<=c;if(!a.children)return g&&
(l.selected=b,d&&this._incrementCounts(a,d)),g;g&&(l.selected=b);k.forEach(a.children,function(a){this.changeSelect(a,b,c)},this);return g}},_incrementCounts:function(a,b,c){a=this._getBinding(a);a.selectCount+=b;c&&(a.leafCount+=c);a.selectCount?a.selectCount==a.leafCount&&(a.selected=!0):a.selected=!1;a.parent&&this._incrementCounts(a.parent,b,c)},getSelectionState:function(a){if(!this.isOwned(a))return!1;a=this._getBinding(a);return a.selectCount&&a.selectCount!=a.leafCount?"mixed":a.selected=
!!a.selectCount},getSelectedNodes:function(a){return this.getDescendingNodes(this.root,!0,a)},getDescendingNodes:function(a,b,c){if(!this.isOwned(a))return[];var l=[];this._collectNodes(a.children,l,b,c);return l},_collectNodes:function(a,b,c,l){k.forEach(a,function(a){var d=this._getBinding(a),g=null===c||void 0===c?d.leafCount:c?d.selectCount:d.leafCount-d.selectCount;g&&(!a.children||!l&&g==d.leafCount?b.push(a):this._collectNodes(a.children,b,c,l))},this)},inspectChildren:function(a,b,c,l){l&&
(b=h.hitch(l,b));a=a||this.root;(a=a.children)&&c&&(a=a.slice(),a.sort(c));return k.every(a,function(a){var l=b(a);return null===l?!1:!1!==l&&a.children?this.inspectChildren(a,b,c):!0},this)},updateExpandedNodes:function(a,b){for(var c in this._hash)this.updateExpand(this._hash[c],!!a[c]);this._updateOddEven(null,b)},updateExpand:function(a,b,c,l){if(a){var d=!1;a.children&&(a=this._getBinding(a),a.expanded!==b&&(d=!0,a.expanded=b));b={};d&&c&&this._updateOddEven(b,l);return b}},_updateOddEven:function(a,
b){var c=1;this.inspectChildren(null,function(b){!1!==b.visible&&(c=1-c);var l=this._getBinding(b);a&&l.isOdd!==c&&(a[this.getIdentity(b)]=c);l.isOdd=c;return!(!b.children||!l.expanded)},b,this)},isOdd:function(a){return(a=this._getBinding(a))&&a.isOdd},get:function(a){return this._hash[a]},getIdentity:function(a){return this.idProperty?a[this.idProperty]:null},query:function(a,c){return b(this._query(this.data,a,c))},_query:function(a,b,c){return this.queryEngine(b,c)(a)},filter:function(a){return this._filter(this.data,
a)},_filter:function(a,b){a=this._query(a,b);return new g(this.storage,a)},sort:function(a,b){return this._sort(this.data,a,b)},_sort:function(a,b,c){"function"===typeof b?(a=a.slice(),a.sort(b)):(b=Array.isArray(b)?b.map(function(a){return{attribute:a.property,descending:a.descending}}):[{attribute:b,descending:c}],a=this._query(a,{},{sort:b}));return new g(this.storage,a)},mayHaveChildren:function(a){return!!a.children},getChildren:function(a,c){var d=this.isOwned(a,!0)?a.children:null;a=this.isDstoreTree||
c&&c.returnCollection;c=this.queryEngine({},a?null:c)(d||[]);return a?new g(this.storage,c):b(c)},fetch:function(){return this._fetchRange(this.data)},fetchRange:function(a){return this._fetchRange(this.data,a)},_fetchRange:function(a,b){return c(d(b?a.slice(b.start,b.end):a.slice()),{totalLength:d(a.length)})}})})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(m){return m})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(m,h){function k(f,
d){return h(this,function(b){for(var e=0,c=b.length;e<c;e++)f.call(d,b[e],e,b)})}return function(f,d){var b=d&&"totalLength"in d;if(f.then){f=m.delegate(f);var e=f.then(function(c){var g=b?d.totalLength:c.totalLength||c.length;c.totalLength=g;return!b&&g});f.totalLength=b?d.totalLength:e;f.response=d&&d.response}else f.totalLength=b?d.totalLength:f.length;f.forEach=k;return f}})},"widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dijit/Tooltip dijit/_WidgetBase ../../dijit/_TemplatedMixin dgrid/OnDemandGrid dgrid/tree esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/TriStateItem ../../dijit/utils/DgridUtil ../../dijit/utils/DomUtil ../../dijit/utils/MouseUtil ../../dijit/tooltips/TooltipUtil dojo/text!./templates/SelectableTreeGrid.html xstyle/css!./css/SelectableTreeGrid.css".split(" "),
function(m,h,k,f,d,b,e,c,g,a,p,r,l,t,u,v,x,n,B,w){var y=m(null,{_selectedRowInfos:null,_lastSelectedRowInfo:null,_outsideHandler:null,_isSelectionFrozen:!1,keepSelectionOnOutsideClick:!1,_previouslySelectedRowsByNode:null,constructor:function(){this._previouslySelectedRowsByNode=new WeakMap},buildRendering:function q(){this._selectedRowInfos={};this.inherited(q,arguments)},postCreate:function z(){this.inherited(z,arguments);f.add(this.domNode,"esriMapsAnalystXNonSelectable")},_reselectSingleNode:function(a){this.selectSingleRow(this._previouslySelectedRowsByNode.get(a),
a)},selectSingleRow:function(a,b){this.unselectAllRows();this._selectRow(a,b)},_selectRow:function(a,b){f.add(a,this.selectedRowClass);f.add(a,"row-level-"+this._getNodeLevel(b));var c=this.tree.getIdentity(b),l={row:a,node:b,nodeId:c,index:b.parent&&b.parent.children.indexOf(b)};this._lastSelectedRowInfo=this._selectedRowInfos[c]=l;this._previouslySelectedRowsByNode.set(b,a);var d=this;this._outsideHandler=this._outsideHandler||e(document.body,"click",function(){n.isMouseOver(d.domNode)||d._isSelectionFrozen||
d.keepSelectionOnOutsideClick||d.unselectAllRows()})},_unselectRow:function(a,b){delete this._selectedRowInfos[this.tree.getIdentity(b)];f.remove(a,this.selectedRowClass)},unselectAllRows:function(){for(var a in this._selectedRowInfos)f.remove(this._selectedRowInfos[a].row,this.selectedRowClass);this._selectedRowInfos={};this._lastSelectedRowInfo=null;this._outsideHandler&&this._outsideHandler.remove();this._outsideHandler=null},getSelectedRowNodes:function(){return this._getSelectedNodesRows().nodes},
selectRowNodes:function(a){var b=this;a&&a.forEach(function(a){var c=b.grid.row(a);c&&c.element&&b._selectRow(c.element,a)})},freezeRowSelection:function(){this._isSelectionFrozen=!0},unfreezeRowSelection:function(){this._isSelectionFrozen=!1},_getSelectedNodesRows:function(){var a=[],b=[],c=[],l;for(l in this._selectedRowInfos)c.push(this._selectedRowInfos[l]);c.sort(function(a,b){return a.index-b.index});c.forEach(function(c){a.push(c.node);b.push(c.row)});return{nodes:a,rows:b}},_emitSelectedRowsEvent:function(){var a=
this._getSelectedNodesRows();if(a.nodes.length)this.onRowsSelected(a.nodes,a.rows)}});return m([a,p,k,y],{templateString:w,tree:null,grid:null,gridClass:"",highlightSelected:!0,firstColumns:null,additionalColumns:null,showRootCheckbox:!0,showCheckboxColumn:!0,showHeader:!0,labelColumnField:"label",gridParams:null,keepContentUnderScroll:void 0,hideInvisibleExpandoIcons:!1,expandOnNodeClick:!1,checkLimit:0,checkLimitMessage:null,checkLimitMessageTimeout:5E3,handleMultipleCheck:!1,enableRowSelection:!1,
enableMultipleRowSelection:!1,allowSelectionFromManyParents:!1,selectedRowFilter:null,selectedRowClass:"row-selected",enableHeaderLabelToggleClick:!0,defaultExpand:null,fitParentSize:!1,renderAllRows:!1,rowPostProcessor:null,_rootCheckbox:null,_checkboxes:null,_lastCheckedNode:null,updateSelectionCountDiv:function(a,b){},getLabel:function(a,b){return a.label},postCreate:function C(){this.inherited(C,arguments);this._createGrid()},resize:function(){this.grid.resize();this._updateCheckboxState(this._rootCheckbox);
for(var a in this._checkboxes)this._updateCheckboxState(this._checkboxes[a]);this._emitSelectionChanged()},setWidth:function(a){this.grid&&this.grid.domNode&&b.set(this.grid.domNode,"width",a+"px")},setHeight:function(a){this.grid&&this.grid.domNode&&b.set(this.grid.domNode,"height",a+"px")},row:function(a){return this.grid.row(a)},cell:function(a){return this.grid.cell(a)},_labelColumn:null,_createGrid:function(){var a=this;this._checkboxes={};var b={label:this.getLabel(this.tree.root,!0),sortable:!1,
field:this.labelColumnField,renderCell:this._renderLabel.bind(this),renderHeaderCell:this._renderLabelHeader.bind(this,this.tree.root)},c;if(this.additionalColumns&&this.additionalColumns.length&&(c=this.additionalColumns.filter(function(b){return b.field===a.labelColumnField})[0])){for(var l in b)void 0===c[l]&&(c[l]=b[l]);b=c}b.indentWidth=b.indentWidth||16;this._labelColumn=b=this._prepareTreeColumn(b);l=[];this.firstColumns&&(l=l.concat(this.firstColumns));this.showCheckboxColumn&&l.push({label:"",
field:"checkbox",sortable:!1,renderCell:this._renderCheckboxForColumn.bind(this),renderHeaderCell:this._renderCheckboxForColumn.bind(this,this.tree.root)});c||l.push(b);this.additionalColumns&&(l=l.concat(this.additionalColumns));b=["esriMapsAnalystXSelectableTreeGrid"];this.gridClass&&b.push(this.gridClass);this.fitParentSize&&b.push("fitParentSize");b=Object.assign({class:b.join(" "),keepScrollPosition:!0,store:this.tree,columns:l},this.gridParams);this.grid=this._createGridObject(b,this.gridContainer);
this.own(this.grid);this.grid._expanded=this.defaultExpand||this.grid._expanded||{};v.oddEvenFix(this.grid);this.own(e(this.tree,"updated",this._onStoreUpdated.bind(this)));this._addKeepScrollHandlers();this._addGridHandlers();this.renderAllRows&&(this.grid.minRowsPerPage=1E4,this.grid.maxRowsPerPage=10250);this.grid.startup();B.autoTooltip(this.domNode);this.showHeader||f.add(this.domNode,"esriMapsAnalystXGridNoHeader");e(this.grid.domNode,".dgrid-expando-icon:click,.dgrid-content .dgrid-column-labelColumn:dblclick,.dgrid-content .dgrid-column-labelColumn:keydown",
function(b){(b=a.grid.row(b))&&a.onExpandChangedUser(b.data)})},_createGridObject:function(a,b){return new r(a,b)},onRowInserted:function(a,b){},_addGridHandlers:function(){function a(a,c){b.enableRowSelection&&c.parent&&(!b.selectedRowFilter||b.selectedRowFilter(c))&&(f.add(a,"esriMapsAnalystXClickable"),e(a,"click",function(l){setTimeout(function(){if(!b._isSelectionFrozen){if(l.shiftKey&&b.enableMultipleRowSelection){if(b._lastSelectedRowInfo&&b._lastSelectedRowInfo.row.parentNode&&b._lastSelectedRowInfo.node.parent===
c.parent){var d=x.getChildIndex(b._lastSelectedRowInfo.row.parentNode,b._lastSelectedRowInfo.row),g=x.getChildIndex(a.parentNode,a),e=d<=g?b._lastSelectedRowInfo.row:a,d=d<=g?a:b._lastSelectedRowInfo.row,g=e;if(e.id!==d.id){do{e=b.grid.row(g).data;b._selectRow(g,e);if(g.id===d.id)break;g=g.nextSibling}while(g)}}else b.selectSingleRow(a,c);x.stealFocus()}else t.isCtrl(l)&&b.enableMultipleRowSelection?b._lastSelectedRowInfo&&b._lastSelectedRowInfo.row.parentNode&&b._lastSelectedRowInfo.node.parent===
c.parent||b.allowSelectionFromManyParents?b._selectedRowInfos[c.id]?b._unselectRow(a,c):b._selectRow(a,c):b.selectSingleRow(a,c):b.selectSingleRow(a,c);b._emitSelectedRowsEvent()}})}))}var b=this;this.own(h.after(this.grid,"insertRow",function(l){var d=l&&b.grid._rowIdToObject[l.id];if(l){if(d&&b.hideInvisibleExpandoIcons&&(!d.children||!d.children.length)){var g=c(".dgrid-expando-icon",l)[0];g&&(g.style.width="0")}x[d&&!1===d.visible?"hide":"show"](l);a(l,d)}d&&(b._updateRowHighlighting(d,l),b.onRowInserted(l,
d));b.rowPostProcessor&&b.rowPostProcessor(l,d);return l}))},_addKeepScrollHandlers:function(){function a(a){if(!b.grid.contentNode)return a;if(b.fitParentSize){var c=x.hasScrollbars(b.grid.bodyNode);b.grid.headerNode.style[b.isLeftToRight()?"right":"left"]=c.w?"":"0px";b._lastContentWidth=b.grid.contentNode.style.width||b._lastContentWidth||"";b.grid.contentNode.style.width=c.h?b._lastContentWidth:""}else b.keepContentUnderScroll?b.grid.contentNode.style.width=b.grid.headerNode.firstChild.offsetWidth+
"px":!1===b.keepContentUnderScroll&&(b.grid.contentNode.style.width="");return a}var b=this;if(this.fitParentSize||void 0!==this.keepContentUnderScroll)h.before(this.grid,"refresh",function(){b.hideCheckLimitMessage();b._lastCheckedNode=null}),h.after(this.grid,"resize",a),h.after(this.grid,"refresh",a)},_getNodeLevel:function(a){var b=-1;for(a=a&&a.parent;a;)b++,a=a.parent;return b},_prepareTreeColumn:function(a){return this._wrapTreeColumn(l(a))},_wrapTreeColumn:function(a){return a},_onStoreUpdated:function(){this._checkboxes=
{};this._refreshGrid();this._rootCheckbox&&this._updateCheckboxState(this._rootCheckbox);this._emitSelectionChanged()},_emitSelectionChanged:function(a){var b=this.tree.root.selectCount;this.updateSelectionCountDiv(this.selectionCounter,b);this.emit("SelectionChanged",{selected:b,toggledTreeNode:a})},refresh:function(){this._refreshGrid();this.refreshCheckboxes()},_isRefreshSuspended:!1,setRefreshSuspended:function(a){this._isRefreshSuspended=a},_refreshGrid:function(){if(!this._isRefreshSuspended){var a=
this.grid.getScrollPosition();this.grid.refresh();this.grid.scrollTo(a);for(var b in this._selectedRowInfos)this.grid.row(this._selectedRowInfos[b].node).element&&this._selectRow(this.grid.row(this._selectedRowInfos[b].node).element,this._selectedRowInfos[b].node)}},getScrollPosition:function(){return this.grid&&this.grid.getScrollPosition()},setScrollPosition:function(a){return this.grid&&this.grid.scrollTo(a)},_renderCheckbox:function(a){if(!a.leafCount&&a!==this.tree.root||!this.showCheckboxColumn||
!1===a.selectable&&void 0===a.indepSelection)return document.createTextNode("");var b=new u(null,{class:"esriStyleInTable"});b.autoToggle=!1;b.node=a;this._updateCheckboxState(b,a);!1===a.enabled&&b.set("disabled",!0);a===this.tree.root?(this._rootCheckbox=b,x[this.showRootCheckbox?"show":"hide"](b.domNode)):this._checkboxes[this.tree.getIdentity(a)]=b;b.onClick=this._onCheckboxClick.bind(this,a,b);return b},_renderCheckboxForColumn:function(a){return(a=this._renderCheckbox(a))&&a.domNode},refreshCheckboxes:function(){this._rootCheckbox&&
this._updateCheckboxState(this._rootCheckbox);for(var a in this._checkboxes)this._updateCheckboxState(this._checkboxes[a])},clearLastCheckInfo:function(){this._lastCheckedNode=null},_onCheckboxClick:function(a,b,c){c.stopPropagation();this.hideCheckLimitMessage();var l=this.handleMultipleCheck&&("function"!==typeof this.handleMultipleCheck||this.handleMultipleCheck(a));l&&c.shiftKey&&this._tryToggleMultipleNodes(this._lastCheckedNode,a,b||c)?this._lastCheckedNode=a:(this._lastCheckedNode=l?a:null,
this._toggleNodeSelection(a,b||c),this.refreshCheckboxes())},_tryToggleMultipleNodes:function(a,b,c){if(!a||a===b||a.parent!==b.parent)return!1;var l=b.parent.children,d=l.indexOf(a);b=l.indexOf(b);a=d<b?1:-1;for(var g=[],e=[],d=d+a;;d+=a){var f=l[d];((void 0===f.indepSelection?f.selected:f.indepSelection)?g:e).push(f);if(d===b)break}g.forEach(function(a){this._toggleNodeSelection(a,c)},this);e.every(function(a){return this._toggleNodeSelection(a,c)},this);this.refreshCheckboxes();return!0},_toggleNodeSelection:function(a,
b){var c=void 0===a.indepSelection?!a.selected:!a.indepSelection;if(c&&this.checkLimit){var l=this.getSelectedNodes().length,d="function"===typeof this.checkLimit?this.checkLimit(this.tree,l):this.checkLimit;if(l>=d)if(void 0===a.indepSelection&&a.children&&!1!==this.tree.getSelectionState(a))c=!1;else return this.showCheckLimitMessage(b),!1}l=!0;void 0===a.indepSelection?(l=this.tree.changeSelect(a,c,d),!l&&this.showCheckLimitMessage(b)):a.indepSelection=c;this._emitSelectionChanged(a);return l},
_checkLimitHandler:null,showCheckLimitMessage:function(a){if(this.checkLimitMessage){var b=a&&(a.domNode||a.target);b&&(g.show(this.checkLimitMessage,b,["above","below"]),a=function(){b&&g.hide(b);b=null},setTimeout(a,this.checkLimitMessageTimeout),this._checkLimitHandler=a,this.onCheckLimitReached(a))}},hideCheckLimitMessage:function(){this._checkLimitHandler&&this._checkLimitHandler();this._checkLimitHandler=null},onCheckLimitReached:function(a){},_updateCheckboxState:function(a){if(a){var b=this._getNodeSelection(a.node);
a.set("checked",b);this._updateRowHighlighting(a.node,null,b)}},_getNodeSelection:function(a){return void 0!==a.indepSelection?a.indepSelection:this.tree.getSelectionState(a)},_updateRowHighlighting:function(a,b,c){this.highlightSelected&&a&&(c=void 0!==c?c:this._getNodeSelection(a),(b=b||this.grid&&this.row(a).element)&&(!0!==c||void 0===a.indepSelection&&!1===a.selectable?f.remove(b,"selected"):f.add(b,"selected")))},_renderLabel:function(a,b,c){b=this._renderLabelNode(a,c);this._provideLabelClickAction(b,
c,a);return b},_provideLabelClickAction:function(a,b,c){var l=this.expandOnNodeClick&&c.children?c.children.length&&(a=b,function(){this.toggleExpand(c);this.onExpandChangedUser(c)}.bind(this)):!1!==c.enabled&&this.showCheckboxColumn?this._onCheckboxClick.bind(this,c,null):null;l&&(f.add(a,"esriMapsAnalystXClickable"),e(a,"click",function(a){a.stopPropagation();l(a)}))},_renderLabelNode:function(a){return d.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)})},
_renderLabelHeader:function(a){var b=d.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)||this._labelColumn&&this._labelColumn.label||""});this.enableHeaderLabelToggleClick&&this.showRootCheckbox&&(f.add(b,"esriMapsAnalystXClickable"),e(b,"click",this._onCheckboxClick.bind(this,a,null)));return b},onRowsSelected:function(a,b){},isNodeSelected:function(a){return a&&(a.selected||a.indepSelection)},getSelectedNodes:function(){var a=this.tree.getSelectedNodes(!1),
b=this._getIndepSelectedNodes();return a.concat(b)},_getIndepSelectedNodes:function(){function a(c){c&&(c.indepSelection&&b.push(c),c.children&&c.children.forEach(a))}var b=[];a(this.tree.root);return b},getSelectedState:function(){if(!this.tree)return null;var a={normalSelection:{},indepSelection:{}},b=this.tree.getSelectedNodes(!1);b&&b.forEach(function(b){a.normalSelection[b.id]=!0});(b=this._getIndepSelectedNodes())&&b.forEach(function(b){a.indepSelection[b.id]=!0});return a},setSelectedState:function(a){if(this.tree){this.tree.changeSelect(this.tree.root,
!1);if(a){for(var b in a.normalSelection){var c=this.tree.get(b);c&&this.tree.changeSelect(c,!0)}for(b in a.indepSelection)if(c=this.tree.get(b))c.indepSelection=!0}this.refreshCheckboxes()}},setNodeSelected:function(a,b,c){a&&(void 0!==a.indepSelection?a.indepSelection=b:this.tree.changeSelect(a,b),!1!==c&&this.refreshCheckboxes())},isExpanded:function(a){a="string"===typeof a?a:a[this.tree.idProperty];return this.grid._expanded&&this.grid._expanded[a]},setExpanded:function(a,b,c){a="string"==typeof a?
a:a[this.tree.idProperty];void 0!==a&&(!1!==c?(c=this.grid.row(a))&&c.element&&this.grid.expand(a,b):this.grid._expanded[a]=b)},toggleExpand:function(a){this.setExpanded(a,!this.isExpanded(a))},getExpandedState:function(){return Object.assign({},this.grid._expanded)},setExpandedState:function(a){this.grid._expanded=a||{}},onExpandChangedUser:function(a){},destroy:function(){this.unselectAllRows();this.inherited(arguments)}})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_TemplatedMixin":function(){define(["dojo/_base/declare",
"dijit/_TemplatedMixin","./_EscapeValueMixin"],function(m,h,k){return m([h,k],{})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_EscapeValueMixin":function(){define(["dojo/_base/declare"],function(m){return m(null,{_escapeValue:function(h){return h.replace(/"/g,"\x26quot;")}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(m,
h,k,f,d,b,e,c,g,a,p){function r(a,b,c,l){l=this.grid.isRTL?"right":"left";var d=".dgrid-expando-icon";b&&(d+=".ui-icon.ui-icon-triangle-1-"+(c?"se":"e"));a=p("div"+d+"[style\x3dmargin-"+l+": "+a*(this.indentWidth||9)+"px; float: "+l+"]");a.innerHTML="\x26nbsp;";return a}function l(a){var b=this,c=this.style.height;c&&(this.style.display="0px"==c?"none":"block");a&&(p(this,".dgrid-tree-resetting"),setTimeout(function(){p(b,"!dgrid-tree-resetting")}));this.style.height=""}function t(f){var t=f.renderCell||
g.defaultRenderCell,u,n;f||(f={});f.shouldExpand=f.shouldExpand||function(a,b,c){return c};e.after(f,"init",function(){var g=f.grid,t=".dgrid-content .dgrid-column-"+f.id,m=[];g.cleanEmptyObservers=!1;if(!g.store)throw Error("dgrid tree column plugin requires a store to operate.");f.renderExpando||(f.renderExpando=r);m.push(g.on(f.expandOn||".dgrid-expando-icon:click,"+t+":dblclick,"+t+":keydown",function(a){var b=g.row(a);g.store.mayHaveChildren&&!g.store.mayHaveChildren(b.data)||"keydown"==a.type&&
32!=a.keyCode||"dblclick"==a.type&&n&&1<n.count&&b.id==n.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||g.expand(b);-1<a.target.className.indexOf("dgrid-expando-icon")&&(n&&n.id==g.row(a).id?n.count++:n={id:g.row(a).id,count:1})}));c("touch")&&m.push(g.on(a.selector(t,a.dbltap),function(){g.expand(this)}));g._expanded||(g._expanded={});m.push(e.after(g,"insertRow",function(a){var b=this.row(a);f.shouldExpand(b,u,this._expanded[b.id])&&this.expand(a,!0,!0);return a}));m.push(e.before(g,"removeRow",
function(a,b){if(a=a.connected)d("\x3e.dgrid-row",a).forEach(function(a){g.removeRow(a,!0)}),b||p(a,"!")}));f.collapseOnRefresh&&m.push(e.after(g,"cleanup",function(){this._expanded={}}));g._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};g.expand=function(a,e,t){var n=a.element?a:g.row(a),r=c("transitionend");a=new k;var h=a.promise;a.resolve();a=n.element;a=-1<a.className.indexOf("dgrid-expando-icon")?a:d(".dgrid-expando-icon",a)[0];t=t||!1===f.enableTransitions;
if(a&&a.mayHaveChildren&&(t||e!==!!this._expanded[n.id])){var u=void 0===e?!this._expanded[n.id]:e;p(a,".ui-icon-triangle-1-"+(u?"se":"e")+"!ui-icon-triangle-1-"+(u?"e":"se"));e=n.element;var m=e.connected,z,x,q={originalQuery:this.query};if(!m){var m=q.container=e.connected=p(e,"+div.dgrid-tree-container"),v=function(a){return g.store.getChildren(n.data,a)};f.allowDuplicates&&(q.parentId=n.id);"level"in a&&(v.level=a.level);h=h.then(function(){if(g.renderQuery)return g.renderQuery(v,q);var a=p(m,
"div"),b=g.renderArray(v(q),a,"level"in v?{queryLevel:v.level}:{});k.when(b,function(){p(a,"!")});return b});r?b(m,r,l):l.call(m)}m.hidden=!u;z=m.style;!r||t?(z.display=u?"block":"none",z.height=""):(u?(z.display="block",x=m.scrollHeight,z.height="0px"):(p(m,".dgrid-tree-resetting"),z.height=m.scrollHeight+"px"),setTimeout(function(){p(m,"!dgrid-tree-resetting");z.height=u?x?x+"px":"auto":"0px"}));u?this._expanded[n.id]=!0:delete this._expanded[n.id]}return h};e.after(f,"destroy",function(){h.forEach(m,
function(a){a.remove()});delete g.expand;delete g._calcRowHeight})});f.renderCell=function(a,b,c,l){var d=f.grid,g=Number(l&&l.queryLevel)+1,e=!d.store.mayHaveChildren||d.store.mayHaveChildren(a),n=l.parentId,g=u=isNaN(g)?0:g,d=f.renderExpando(g,e,d._expanded[(n?n+"-":"")+d.store.getIdentity(a)],a);d.level=g;d.mayHaveChildren=e;(a=t.call(f,a,b,c,l))&&a.nodeType?(p(c,d),p(c,a)):c.insertBefore(d,c.firstChild)};return f}t.defaultRenderExpando=r;f.getObject("dgrid.tree",!0);return dgrid.tree=t})},"dgrid/util/has-css3":function(){define(["dojo/has"],
function(m){function h(f,d){f=f.style;var b;if(d in f)return!0;d=d.slice(0,1).toUpperCase()+d.slice(1);for(b=k.length;b--;)if(k[b]+d in f)return k[b];return!1}var k=["ms","O","Moz","Webkit"];m.add("css-transitions",function(f,d,b){return h(b,"transitionProperty")});m.add("css-transforms",function(f,d,b){return h(b,"transform")});m.add("css-transforms3d",function(f,d,b){return h(b,"perspective")});m.add("transitionend",function(){var f=m("css-transitions");return f?!0===f?"transitionend":{ms:"MSTransitionEnd",
O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[f]:!1});return m})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(m,h,k){var f={listenToKeyboardCombinationOverNode:function(d){return m(document.body,"keydown",function(b){if(!d.isCtrl||f.isCtrl(b))if(!d.isShift||b.shiftKey)if(!d.isAlt||b.altKey)String.fromCharCode(b.keyCode).toLowerCase()!==d["char"]||d.node&&!k.isNodeInLayout(d.node)||d.callback(b)})},isCtrl:function(d){return h("mac")?
d.metaKey:d.ctrlKey}};return f})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),function(m,h,k,f,d,b,e,c){function g(){p||(p=f.create("div",{"class":"esriGEOffscreen"},document.body));return p}var a={isHidden:function(a){return a&&k.contains(a,"esriGEHidden")},hasVisibleChildren:function(b){if(!b||!b.children.length)return!1;
for(var c=0;c<b.children.length;c++)if(!a.isHidden(b.children[c]))return!0;return!1},hide:function(b){return a.addTag(b,"esriGEHidden")},show:function(b){return a.removeTag(b,"esriGEHidden")},display:function(b,c){return a[c?"show":"hide"](b)},addTag:function(b,c){return a.applyCallback(b,function(a){a&&k.add(a,c)})},removeTag:function(b,c){return a.applyCallback(b,function(a){a&&k.remove(a,c)})},applyCallback:function(a,b,c){c&&(b=m.hitch(c,b));Array.isArray(a)?a.forEach(b):b(a);return a},getChildIndex:function(a,
b){if(!a||!a.children||!b)return-1;for(var c=0;c<a.children.length;c++)if(a.children[c]===b)return c;return-1},getChildren:function(a){if(!a||!a.children)return null;for(var b=[],c=0;c<a.children.length;c++)b.push(a.children[c]);return b},getChildNodes:function(a){if(!a||!a.childNodes)return null;for(var b=[],c=0;c<a.childNodes.length;c++)b.push(a.childNodes[c]);return b},isChildOf:function(a,b,c){var l=!1,d=function(a){if(c&&!c(a))return!1;a.parentNode===b?l=!0:a.parentNode&&d(a.parentNode)};a&&
d(a);return l},isNodeInLayout:function(c){return a.isChildOf(c,document.body,function(c){return!a.isHidden(c)&&"none"!=b.get(c,"display")&&!k.contains(c,"dijitHidden")})},isNodeVisible:function(c){return a.isChildOf(c,document.body,function(a){return!k.contains(a,"dijitHidden")&&"hidden"!=b.get(a,"visibility")})},isNodeOnscreen:function(b){return a.isChildOf(b,document.body,function(a){return!k.contains(a,"esriGEOffscreen")})},enableContent:function(a,c,g){if(a){g=g||{};var l=a.children.length-1;
if(!(0>l)){l=a.children[l];k.contains(l,"esriGEDisabledContent")||(l=null);if(c)l&&a.removeChild(l);else if(l=l||f.create("div",{"class":"esriGEDisabledContent"+(g.overlayClass?" "+g.overlayClass:"")},a),g.textContent&&(l.textContent=g.textContent),!1!==g.fitParent&&(a=d[g.marginBox?"getMarginBox":"getContentBox"](a).h))a=a.toString()+"px",b.set(l,{height:a,marginTop:"-"+a});return l}}},enableContentAbsolute:function(c,d,g){if(c){g=g||{};var l=b.get(c,"position");"relative"!==l&&"absolute"!==l&&b.set(c,
"position","relative");return a.enableContent(c,d,{overlayClass:"esriGEAbsoluteStretched "+(g.overlayClass||"")+(g.isTransparent?" esriGEDisabledContentTransparent ":""),fitParent:!1,textContent:g.textContent})}}},p;a.hideNodeInBackground=function(a,b){if(a){if(a._hideNodeInBackgroundUndoController)return a._hideNodeInBackgroundUndoController;var c=f.create("div",null,a,"after"),d=f.create("div",{style:"position: absolute; left: 0px; top: 0px;"},g());f.place(a,d);b="DomUtil.hideNodeInBackground"+
(b?"."+b:"");h.set(c,"_bg_memo_node",b);h.set(d,"_bg_temp_node",b);b={undo:function(){c&&(c.parentNode&&f.place(a,c,"replace"),f.destroy(c),f.destroy(d),p.children.length||(f.destroy(p),p=null),c=null,delete a._hideNodeInBackgroundUndoController)},remove:function(){this.undo()}};return a._hideNodeInBackgroundUndoController=b}};a.showNodeFromBackground=function(a){a&&a._hideNodeInBackgroundUndoController&&a._hideNodeInBackgroundUndoController.undo()};a.noTransformPosition=function(a){function c(a){for(var c=
{x:0,y:0};a.offsetParent;)c.x+=a.offsetLeft,c.y+=a.offsetTop,a=a.offsetParent,c.x+=b.get(a,"borderLeftWidth"),c.y+=b.get(a,"borderTopWidth");return c}function d(a){return b.get(a,"width")+b.get(a,"paddingLeft")+b.get(a,"paddingRight")+b.get(a,"borderLeftWidth")+b.get(a,"borderRightWidth")}function g(a){return b.get(a,"height")+b.get(a,"paddingTop")+b.get(a,"paddingBottom")+b.get(a,"borderTopWidth")+b.get(a,"borderBottomWidth")}if(a){var l;if(a instanceof SVGElement&&a.getBBox)return l=(l=a.ownerSVGElement&&
a.ownerSVGElement.parentNode)&&c(l),a=a.getBBox(),{x:(a.x||0)+l.x,y:(a.y||0)+l.y,w:a.width||0,h:a.height||0};l=c(a);return{x:l.x,y:l.y,w:d(a),h:g(a)}}};a.uniteNodeBoxes=function(b,c){var d=1E6,g=1E6,l=-1E6,e=-1E6;b.forEach(function(b){b=a.noTransformPosition(b);d=Math.min(d,b.x);g=Math.min(g,b.y);l=Math.max(l,b.x+b.w);e=Math.max(e,b.y+b.h)});b={x:d,y:g,w:l-d,h:e-g};c&&(c=a.noTransformPosition(c),b.x-=c.x,b.y-=c.y);return b};a.getNodesBox=function(b,c){if(!b||!b.length)return null;for(var g=1E6,l=
-1E6,e=1E6,f=-1E6,p=0;p<b.length;p++)var r=b[p],r=c&&c.ignoreTranformation?a.noTransformPosition(r):d.position(r),g=Math.min(g,r.x),e=Math.min(e,r.y),l=Math.max(l,r.x+r.w),f=Math.max(f,r.y+r.h);return{x:g,y:e,w:l-g,h:f-e}};a.traverseChildren=function(a,b){function c(a){if(a&&a.children)for(var d=0;d<a.children.length;d++){var g=a.children[d];if(b(g))break;c(g)}}c(a)};a.scrollToListNode=function(a,b,c){var d=b.offsetTop+b.clientHeight,g=d-(a.scrollTop+a.clientHeight);0<g&&(a.scrollTop+=g);c&&(d-=b.clientHeight-
c.offsetTop,g=a.scrollTop-d,0<g&&(a.scrollTop-=g))};var r;a.getScrollbarSize=function(){if(!r){var a=f.create("div",null,document.body);a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";a.style.top="9999px";r={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight};f.destroy(a)}return r};a.hasScrollbars=function(a){var c=b.getComputedStyle(a);return{w:"scroll"===c.overflowX||a.offsetWidth>a.clientWidth&&"auto"===c.overflowX,h:"scroll"===c.overflowY||
a.offsetHeight>a.clientHeight&&"auto"===c.overflowY}};a.getMeasureContext=function(a){a=a||{};a.style=a.style?a.style+" ":"";a.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:f.create("div",a,document.body),measureText:function(a){this.div.innerHTML=a;a=d.getMarginBox(this.div);delete a.l;delete a.t;return a},destroy:function(){f.destroy(this.div)}}};a.getTextBox=function(b,c){c=a.getMeasureContext(c);b=c.measureText(b);c.destroy();return b};a.getNodeFontFamily=function(a){return(a=
b.get(a,"fontFamily")||b.getComputedStyle(a)["font-family"])?a.replace(/'|"/g,"").split(",")[0]:a};a.getNodeFontSize=function(a){return b.toPixelValue(a,b.get(a,"fontSize"))};a.stealFocus=function(){var a=new c;try{var b=f.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});f.place(b,document.body);b.select();f.destroy(b)}catch(u){}setTimeout(a.resolve,0);return a.promise};a.getWindowBox=function(){for(var b=[],c=0,d=document.body.children.length;c<d;c++){var g=document.body.children[c];
a.isHidden(g)||(a.hide(g),b.push(g))}c={w:document.body.clientWidth,h:document.body.clientHeight};b.forEach(function(b){a.show(b)});return c};a.getBorder=function(a){return{t:b.toPixelValue(a,b.get(a,"borderTopWidth")),r:b.toPixelValue(a,b.get(a,"borderRightWidth")),b:b.toPixelValue(a,b.get(a,"borderBottomWidth")),l:b.toPixelValue(a,b.get(a,"borderLeftWidth"))}};a.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};a.setAttribute=function(a,b,c){return 2===arguments.length?
h.set(a,b):h.set(a,b,c)};a.getAttribute=function(a,b,c){return 2===arguments.length?h.get(a,b):h.get(a,b,c)};a.addClass=function(a,b){return k.add(a,b)};a.removeClass=function(a,b){return k.remove(a,b)};a.toggleClass=function(a,b,c){return k[c?"add":"remove"](a,b)};a.replaceClass=function(a,b,c){return k.replace(a,b,c)};a.containsClass=function(a,b){return k.contains(a,b)};a.getStyle=function(a,c){return b.get(a,c)};a.setStyle=function(a,c,d){return 2===arguments.length?b.set(a,c):b.set(a,c,d)};a.toPixelValue=
function(a,b){return parseFloat(b)||0};a.getComputedStyle=function(a){return a&&1===a.nodeType&&window.getComputedStyle(a)};a.position=function(a,b){return d.position(a,b)};a.getMarginBox=function(a,b){return d.getMarginBox(a,b)};a.setMarginBox=function(a,b){return d.setMarginBox(a,b)};a.getMarginExtents=function(a,b){return d.getMarginExtents(a,b)};a.getContentBox=function(a,b){return d.getContentBox(a,b)};a.getPadBorderExtents=function(a,b){return d.getPadBorderExtents(a,b)};a.getPadExtents=function(a,
b){return d.getPadExtents(a,b)};a.getBorderExtents=function(a,b){return d.getBorderExtents(a,b)};a.docScroll=function(){return d.docScroll()};a.create=function(a,b,c,d){return f.create(a,b,c,d)};a.toDom=function(a){return f.toDom(a)};a.place=function(a,b,c){return f.place(a,b,c)};a.empty=function(a){return f.empty(a)};a.destroy=function(a){return f.destroy(a)};a.query=function(a,b){a=e(a,b);b=[];for(var c=0,d=a.length;c<d;c++)b.push(a[c]);return b};return a})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],
function(m){return m})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),function(m,h,k,f,d,b,e,c){return m(f,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(g,a,f){var p=c.isMobileDevice()?"touchstart":"click";a=a||{};var l=a["class"];a["class"]=(l?l+" ":"")+"esriTriStateCheckBoxIcon";
if(l=a.label){if(g instanceof HTMLLabelElement)g.innerHTML="\x26nbsp;"+l;else{var h=a.labelAttrs||{};h.innerHTML="\x26nbsp;"+l;h=b.create("label",h);g&&b.place(h,g);g=h}a=k.mixin({},a);delete a.label;delete a.labelAttrs}this.checkboxNode=b.create("div",a,g,g instanceof HTMLLabelElement?"first":f);this._currentClass=this._composeClass();e.add(this.checkboxNode,this._currentClass);g instanceof HTMLLabelElement?(d(g,p,k.hitch(this,this._onClick)),e.add(g,"esriTriStateCheckBoxLabel")):d(this.checkboxNode,
p,k.hitch(this,this._onClick));this.domNode=l?g:this.checkboxNode},postscript:function(){},_onClick:function(b){this.disabled||(this.autoToggle&&this.toggle(),b.checked=this.checked,this.onClick(h.fix(b)))},onClick:function(b){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(b){b!==this.checked&&(this.checked="mixed"===b?b:this._lastChecked=!!b,this._updateClass())},_disabledSetter:function(b){this.disabled=!!b;this._updateClass()},_updateClass:function(){var b=
this._composeClass();b!==this._currentClass&&(e.replace(this.checkboxNode,b,this._currentClass),this._currentClass=b)},_composeClass:function(){var b="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?b+"Disabled":b}})})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff"],function(m){var h={},k=function(){var f=window,d=document,b=f.navigator.platform,e=f.navigator.userAgent,c={ios:!1,android:!1,androidChrome:!1,desktop:!1,
windowsPhone:!1,iphone:!1,iphoneX:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!f.cordova&&!f.phonegap),phonegap:!(!f.cordova&&!f.phonegap)},g=f.screen.width,a=f.screen.height,p=e.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),r=e.match(/(Android);?[\s\/]+([\d.]+)?/),l=e.match(/(iPad).*OS\s([\d_]+)/),h=e.match(/(iPod)(.*OS\s([\d_]+))?/),k=!l&&e.match(/(iPhone\sOS|iOS)\s([\d_]+)/),g=k&&(375===g&&812===a||414===g&&896===a),a=0<=e.indexOf("MSIE ")||0<=e.indexOf("Trident/"),m=
0<=e.indexOf("Edge/"),x=0<=e.indexOf("Gecko/")&&0<=e.indexOf("Firefox/"),n="MacIntel"===b,b="Win32"===b;c.ie=a;c.edge=m;c.firefox=x;p&&(c.os="windows",c.osVersion=p[2],c.windowsPhone=!0);r&&!b&&(c.os="android",c.osVersion=r[2],c.android=!0,c.androidChrome=0<=e.toLowerCase().indexOf("chrome"));if(l||k||h)c.os="ios",c.ios=!0;k&&!h&&(c.osVersion=k[2].replace(/_/g,"."),c.iphone=!0,c.iphoneX=g);l&&(c.osVersion=l[2].replace(/_/g,"."),c.ipad=!0);h&&(c.osVersion=h[3]?h[3].replace(/_/g,"."):null,c.iphone=
!0);c.ios&&c.osVersion&&0<=e.indexOf("Version/")&&"10"===c.osVersion.split(".")[0]&&(c.osVersion=e.toLowerCase().split("version/")[1].split(" ")[0]);c.webView=!(!(k||l||h)||!e.match(/.*AppleWebKit(?!.*Safari)/i)&&!f.navigator.standalone)||f.matchMedia&&f.matchMedia("(display-mode: standalone)").matches;c.standalone=c.webView;c.desktop=!(c.os||c.android||c.webView);c.desktop&&(c.macos=n,c.windows=b);c.os&&"ios"===c.os&&(e=c.osVersion.split("."),d=d.querySelector('meta[name\x3d"viewport"]'),c.minimalUi=
!c.webView&&(h||k)&&(7===1*e[0]?1<=1*e[1]:7<1*e[0])&&d&&0<=d.getAttribute("content").indexOf("minimal-ui"));c.needsStatusbarOverlay=function(){return(c.webView||c.android&&c.cordova)&&f.innerWidth*f.innerHeight===f.screen.width*f.screen.height?!c.iphoneX||90!==f.orientation&&-90!==f.orientation?!0:!1:!1};c.statusbar=c.needsStatusbarOverlay();c.pixelRatio=f.devicePixelRatio||1;return c}();h.device=k;h.isMobileDevice=function(){return!k.desktop&&!k.ipad};h.isPCWithTouchScreen=function(){return k.desktop&&
m("touch")};h.isLandscape=function(){return 90===Math.abs(window.orientation)};h.press=k.desktop?"mousedown":"touchstart";h.release=k.desktop?"mouseup":"touchend";h.click=k.desktop?"click":"touchend";h.clickOrRelease=k.desktop?"click, mouseup":"touchend";h.move=k.desktop?"mousemove":"touchmove";return h})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DgridUtil":function(){define(["dojo/aspect","dojo/dom-class","dojo/query","../../utils/ArrayUtil"],function(m,h,k,f){function d(b,a,d){if(void 0===
d){var g=b._rowIdToObject[a.id];g&&(d=(b=b.store)&&b.isOdd&&b.isOdd(g))}0!==d&&1!==d||h.replace(a,c[d],c[1-d])}function b(b,a,c){var g=b.store;if(g&&g.updateExpand){c=g.updateExpand(a.data,c,!0,b.getSortingFunction());for(var e in c)a=b.row(g.get(e)),a.element&&d(b,a.element,c[e])}}var e=["ui-icon-triangle-1-e","ui-icon-triangle-1-se"],c=["dgrid-row-even","dgrid-row-odd"];return{createExpando:function(b){h.add(b,"dgrid-expando-icon ui-icon ui-icon-triangle-1-e esriMapsAnalystXClickable");return{expando:b,
update:function(a){a=a?1:0;h.replace(b,e[a],e[1-a])}}},oddEvenFix:function(c){c.expand&&(c.getSortingFunction=function(){var a=this.get("sort");return a&&a.length?f.getSorting(a):null},m.after(c,"insertRow",function(a){d(c,a);return a}),m.before(c,"refresh",function(){var a=c.store;a&&a.updateExpandedNodes&&a.updateExpandedNodes(c._expanded,c.getSortingFunction())}),m.around(c,"expand",function(a){return function(d,g){var e=d.element?d:c.row(d);void 0===g&&(g=!c._expanded[e.id]);!0===g&&b(c,e,!0);
var f=a.apply(this,arguments);!1===g&&b(c,e,!1);return f}}),m.around(c,"adjustRowIndices",function(a){return function(){var b=c.store;b&&b.updateExpandedNodes&&b.updateExpand&&b.isOdd||a.apply(this,arguments)}}))},makeContentNeverGoUnderScroll:function(b){function a(){var a=b.headerNode.firstChild,c=b.contentNode;c&&a&&a.offsetWidth!==c.offsetWidth&&(c.style.width="",a.style.width="",a.style.width=c.offsetWidth+"px")}m.after(b,"resize",a);m.after(b,"refresh",a);m.after(b,"expand",function(b){setTimeout(a,
100);setTimeout(a,300);return b})},inlineSortArrow:function(b,a,c){a=f.arrayToObject(f.listToArray(a));m.after(b,"updateSortArrow",function(d,g){if((g=d[0]&&d[0].attribute)&&a[g]){var e=(g=b._sortNode||b._findSortArrowParent(g))&&k(".dgrid-sort-arrow",g)[0];d=d[0].descending;if(e){e.remove();h.remove(g,"dgrid-sort-down dgrid-sort-up");var f=c?k(c,g)[0]:g.lastChild.append?g.lastChild:g;f.append||(f=g);h.add(f,d?"dgrid-sort-down":"dgrid-sort-up");f.append(e)}}},!0)}}})},"widgets/BusinessAnalyst/esriAnalystX/utils/ArrayUtil":function(){define("require exports ../../baUtil/array dojo/store/util/SimpleQueryEngine ./ObjectUtil esri/dijit/geoenrichment/utils/ArrayUtil".split(" "),
function(m,h,k,f,d,b){function e(a,b){a.some(function(c,d){b.func(c,d,b,a);if(b.stop)return!0});return b}function c(a){var b=a.split(" "),c=b[1];a={};switch(b[0]){case "max":a.result=-Infinity;b=function(a,b,g){g.result=Math.max(g.result,d.getObject(a,c))};break;case "min":a.result=Infinity;b=function(a,b,g){g.result=Math.min(g.result,d.getObject(a,c))};break;case "sum":a.result=0;b=function(a,b,g){g.result+=d.getObject(a,c)};break;case "random":a.result=void 0;b=function(a,b,c,d){c.result=d[Math.round((d.length-
1)*Math.random())];c.stop=!0};break;default:throw Error("Unsupported query.");}a.func=b;return a}var g={getSorting:function(a,b){if(!a)return d.compare;if("function"===typeof a)return a;var c;c=Array.isArray(a)?a:a.sort||[a];var g={};"string"===typeof b&&(b=[b]);Array.isArray(b)?b.forEach(function(a){g[a]=d.compareNames}):b&&(g=b);return function(a,b){for(var e=void 0,f=0;e=c[f];f++){var l=a[e.attribute],p=b[e.attribute];if(l=(g[e.attribute]||(g["*"]?g["*"].bind(null,e.attribute):d.compare))(l,p,
!1,!1,a,b))return e.descending?-l:l}return 0}},sort:function(a,b,c){return a.sort(g.getSorting(b,c))},sortIndices:function(a,b,c){a=k.map(a,function(a,b){return{value:a,index:b}});var d=g.getSorting(b,c);a.sort(function(a,b){return d(a.value,b.value)});return k.map(a,function(a){return a.index})},getQueryEngine:function(a,b){return function(c,d){d&&d.sort&&(d=Object.assign({},d),d.sort=g.getSorting(d.sort,a));return(b||f)(c,d)}},objectToArray:function(a,b){void 0===b&&(b=null);var c=[],d=b?function(c){return a[c]?
a[c][b]:void 0}:function(b){return a[b]},g;for(g in a){var e=d(g);"undefined"!==typeof e&&c.push(e)}return c},arrayToObject:function(a,c){var d={},g=b.composeIdentityFunction(c);k.forEach(a,function(a){d[g(a)]=a});return d},composeIdentityFunction:b.composeIdentityFunction,removeDuplicates:b.removeDuplicates,splitArrayToBunches:b.splitArrayToBunches,contains:function(a,b){return-1!==k.indexOfLoose(a,b)},remove:function(a,b){b=k.indexOfLoose(a,b);-1!==b&&a.splice(b,1);return-1!==b},merge:function(a,
b){a=a||[];null!=b&&Array.prototype.push.apply(a,b);return a},listToArray:function(a,b){if(null==a)return[];void 0===b&&(b=",");a="string"===typeof a?a.split(b):a.slice();for(b=0;b<a.length;b++)"string"===typeof a[b]&&(a[b]=a[b].trim());return a},reorderArray:function(a,b){var c=a.length,d=0,g=Array(c),e={},f={},p;for(p in b){var n=Math.round(p);if(0<=n&&n<c&&!e[n]){var h=Math.round(b[p]);0<=h&&h<c&&!f[h]&&(g[h]=a[n],e[n]=1,f[h]=1,d++)}}d!==c&&(g=g.filter(function(a,b){return f[b]}),a.forEach(function(a,
b){!e[b]&&g.push(a)}));return g},mapIndices:function(a,b,c,d){d=null==d?null:d;if(1===a)c.call(d,0,Math.floor(b/2));else{b=(b-1)/(a-1);for(var g=0;g<a;g++)c.call(d,g,Math.floor(.5+g*b))}},moveElement:function(a,b,c,d){var g=Array.isArray(b)?b:[b];if(-1!==g.indexOf(c))return a.slice();var e=[];a.forEach(function(a){-1===g.indexOf(a)&&(a==c?"before"===d?(g.forEach(function(a){e.push(a)}),e.push(c)):"after"===d&&(e.push(c),g.forEach(function(a){e.push(a)})):e.push(a))});return e},min:function(a,b){var c=
a.length;switch(c){case 0:return null;case 1:return a[0];default:for(var d=a[0],g=b(d),e=0,f=1;f<c;f++){var h=b(a[f]);g>h&&(d=a[f],g=h,e=f)}return{key:e,value:d,comparisonValue:g}}},max:function(a,b){var c=a.length;switch(c){case 0:return null;case 1:return a[0];default:for(var d=a[0],g=b(d),e=0,f=1;f<c;f++){var h=b(a[f]);g<h&&(d=a[f],g=h,e=f)}return{key:e,value:d,comparisonValue:g}}},query:function(a,b){if("object"===typeof b)return e(a,b);if("string"===typeof b)return b=c(b),e(a,b).result},everyEqualProperty:function(a,
b){if(2>a.length)return!0;var c;return!a.some(function(a,d){if(0===d)c=a[b];else if(c!==a[b])return!0})}};return g})},"widgets/BusinessAnalyst/baUtil/array":function(){define(["require","exports"],function(m,h){var k=Array.prototype,f={every:function(d,b,e){return null==d?!0:"string"===typeof d?k.every.call(d.split(""),b,e):k.every.call(d,b,e)},some:function(d,b,e){return null==d?!1:"string"===typeof d?k.some.call(d.split(""),b,e):k.some.call(d,b,e)},forEach:function(d,b,e){if(null!=d)return"string"===
typeof d?k.forEach.call(d.split(""),b,e):k.forEach.call(d,b,e)},map:function(d,b,e){return null==d?[]:"string"===typeof d?k.map.call(d.split(""),b,e):k.map.call(d,b,e)},filter:function(d,b,e){return null==d?[]:"string"===typeof d?k.filter.call(d.split(""),b,e):k.filter.call(d,b,e)},indexOf:function(d,b){return null==d?-1:"string"===typeof d?k.indexOf.call(d.split(""),b):k.indexOf.call(d,b)},indexOfLoose:function(d,b){if(null==d||void 0===d.length)return-1;if("string"===typeof d)return f.indexOfLoose(d.split(""),
b);for(var e=0,c=d.length;e<c;e++)if(d[e]==b)return e;return-1},lastIndexOf:function(d,b){return null==d?-1:"string"===typeof d?k.lastIndexOf.call(d.split(""),b):k.lastIndexOf.call(d,b)},lastIndexOfLoose:function(d,b){if(null==d||void 0===d.length)return-1;if("string"===typeof d)return f.lastIndexOfLoose(d.split(""),b);for(var e=d.length-1;0<=e;e--)if(d[e]==b)return e;return-1}};return f})},"widgets/BusinessAnalyst/esriAnalystX/utils/ObjectUtil":function(){define(["../../baUtil/ObjectUtil","esri/dijit/geoenrichment/utils/ObjectUtil",
"esri/dijit/geoenrichment/utils/SortUtil"],function(m,h,k){var f=Object.assign({},m,h,k);f.getPrototypeOf=function(d){try{return Object.getPrototypeOf?Object.getPrototypeOf(d):d.__proto__||d.constructor&&d.constructor.prototype}catch(b){return null}};f.isJson=function(d){return"object"===typeof d&&f.getPrototypeOf(d)===Object.prototype};f.copyJson=function(d){return void 0===d||null===d?null:JSON.parse(JSON.stringify({object:d})).object};f.convert=function(d,b,e){var c=b||function(){};b=c(d);if("undefined"!==
typeof b)return b;if(Array.isArray(d)){var g=[];d.forEach(function(a){g.push(f.convert(a,c,e))},this);return g}if(!f.isJson(d))return d;b={};for(var a in d){var h=d[a],k=e?c(a):a;"undefined"===typeof k&&(k=a);b[k]=f.convert(h,c,e)}return b};f.getDeepCopy=function(d){return f.convert(d)};f.getRange=function(d,b,e){b="function"===typeof b?b.bind(null==e?null:e):null;var c,g,a;for(a in d)e=d[a],e=Number(null===b?e:b(e,a)),isNaN(e)||(void 0===c?c=g=e:(c=Math.min(c,e),g=Math.max(g,e)));return void 0===
c?{}:{min:c,max:g}};f.removeEmptyObjects=function(d){function b(c){c&&"object"===typeof c&&Object.keys(c).forEach(function(d){var a=c[d];!a||"object"!==typeof a||Array.isArray(a)||Object.keys(a).length?b(a):(e=!0,delete c[d])})}for(var e=!0;e;)e=!1,b(d);return d};f.removeValues=function(d,b){function e(c){c&&"object"===typeof c&&Object.keys(c).forEach(function(d){b(d,c[d])?e(c[d]):delete c[d]})}e(d);return d};f.isEqual=function(d,b){if(null===d||"object"!==typeof d||null===b||"object"!==typeof b)return d===
b;if(Object.keys(d).length!==Object.keys(b).length)return!1;var e={},c;for(c in d)e[c]=!0;for(c in b)if(void 0!==e[c])delete e[c];else return!1;for(c in d)if(!f.isEqual(d[c],b[c]))return!1;return!0};f.getObject=function(d,b){if(!b)return d;b=b.split(".");for(var e=0;e<b.length;e++)d=d&&d[b[e]];return d};f.formatNumber=function(d,b){b="number"===typeof b?{places:b}:b||{};if(null==b.places||0>b.places)b.places=f.getPlaces(d,!0),b.maxPlaces&&b.places>b.maxPlaces&&(b.places=b.maxPlaces);return h.formatNumber(d,
b)};f.getPlaces=function(d,b){function e(a,b){var e=d.indexOf(a,c);if(0>e)return g;a=d.charAt(e+a.length);return!a||0>b.indexOf(a)?g:e-c}d=+d;if(isNaN(d))return-1;d+="";var c=d.indexOf(".")+1,g=c?d.length-c:0;if(2>=g||!b)return g;b=0;if(!+d.substr(0,c-1))for(;"0"===d.charAt(c);)c++,b++,g--;for(var a=g-1;2<=a;a--){var f=Math.min(e("000000000000000".substr(0,a),"01234"),e("999999999999999".substr(0,a),"56789"));if(f!==g){g=f;break}}return g+b};return f})},"widgets/BusinessAnalyst/baUtil/ObjectUtil":function(){define(["require",
"exports"],function(m,h){function k(f,d){for(var b=0,e=Object.keys(d);b<e.length;b++){var c=e[b];"object"!==typeof f[c]||null===f[c]||"object"!==typeof d[c]||null===d[c]?f[c]=d[c]:Array.isArray(f[c])?Array.isArray(d[c])?f[c].concat(d[c]):f[c]=d[c]:Array.isArray(d[c])?f[c]=d[c]:k(f[c],d[c])}}return{map:function(f,d,b){void 0!==b&&(d=d.bind(b));if("object"!==typeof f)throw Error("Object or array expected");if(Array.isArray(f)){b=[];for(var e=0,c=f.length;e<c;e++)b.push(d(f[e],e));return b}b={};e=0;
for(c=Object.keys(f);e<c.length;e++){var g=c[e];Object.hasOwnProperty.call(f,g)&&(b[g]=d(f[g],g))}return b},deepAssign:function(f){for(var d=[],b=1;b<arguments.length;b++)d[b-1]=arguments[b];for(b=0;b<d.length;b++)k(f,d[b]);return f}}})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number"],function(m){var h={};Math.log10=Math.log10||function(f){return Math.log(f)*Math.LOG10E};h.populateObject=function(f,d,b){function e(c,d){function a(a){var g=c[a],f=d[a],h=g&&"object"===
typeof g;void 0!==g&&(void 0===f?d[a]=g:f&&"object"===typeof f&&h?e(g,f):b&&(h?(f=d[a]={},e(g,f)):d[a]=c[a]))}if(c&&d&&!(Array.isArray(c)&&!Array.isArray(d)||Array.isArray(d)&&!Array.isArray(c)))if(Array.isArray(c))c.forEach(function(b,c){a(c)});else for(var g in c)a(g)}e(d,f);return f};h.filterByPattern=function(f,d){function b(c,d,a){for(var g in c){var e=c[g],f=d[g];if(Array.isArray(e)){var h=e[0];if(f&&Array.isArray(f)){var k=a[g]=[];f.forEach(function(a){if(a&&"object"===typeof a){var c=Array.isArray(a)?
[]:{};b(h,a,c);k.push(c)}})}}else if("object"===typeof e){if(f&&"object"===typeof f){var m=a[g]={};b(e,f,m)}}else void 0!==f&&(a[g]=f)}}var e={};b(d,f,e);return e};h.traverseObject=function(f,d){for(var b in f){var e=f[b];d(e,b,f);e&&"object"===typeof e&&h.traverseObject(e,d)}};h.copyOwnJsonProperties=function(f,d,b){d=d||{};for(var e in f){var c=f[e];f.hasOwnProperty(e)&&"function"!=typeof c&&(c&&"object"==typeof c&&b&&(c=b(e,c)),void 0!==c&&(d[e]=c))}return d};h.removeUndefinedProperties=function(f){f&&
Object.keys(f).forEach(function(d){void 0===f[d]&&delete f[d]});return f};h.getValue=function(f,d){if("string"!==typeof d)return f;d=d.split(".");for(var b=0;b<d.length;b++)f=f&&f[d[b]];return f};h.setValue=function(f,d,b){if("string"===typeof d&&(d=d.split("."),d.length)){for(var e=0;e<d.length-1;e++)f=f&&f[d[e]];f&&(f[d[d.length-1]]=b)}};h.isNumber=function(f){return!isNaN(parseFloat(f))&&isFinite(f)};h.roundNumber=function(f,d){return"number"!==typeof f?f:parseFloat(f.toFixed(void 0!==d?d:0))};
h.getBestPrecision=function(f){return 0===f?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(f))))};h.getPlaces=function(f,d){function b(a,b){var d=f.indexOf(a,e);if(0>d)return c;a=f.charAt(d+a.length);return!a||0>b.indexOf(a)?c:d-e}f=+f;if(isNaN(f))return-1;f+="";var e=f.indexOf(".")+1,c=e?f.length-e:0;if(2>=c||!d)return c;d=0;if(!+f.substr(0,e-1))for(;"0"===f.charAt(e);)e++,d++,c--;for(var g=c-1;2<=g;g--){var a=Math.min(b("000000000000000".substr(0,g),"01234"),b("999999999999999".substr(0,g),"56789"));
if(a!==c){c=a;break}}return c+d};h.formatNumber=function(f,d){d="number"===typeof d?{places:d}:d||{};var b=d.places,e={};0<=b?e.places=b:b=-1;f=m.format(f,e);if(d.noSeparator){void 0===k&&(k=m.format(9999,{places:0}).replace(/9/g,""));var e=k,c;if(e)for(;0<=(c=f.indexOf(e));)f=f.substr(0,c)+f.substr(c+1)}if(d.preserveTrailingZeroes||0>=b||!f)return f;for(d=f.length;0<b&&"0"==f.charAt(d-1);)d--,--b||d--;return f.substr(0,d)};h.formatNumberAsCurrency=function(f,d,b){return d?d.split(";")[0>f?1:0].replace("0",
h.formatNumber(Math.abs(f),b)):h.formatNumber(f,b)};var k;h.parseNumber=function(f,d,b,e){if(""===f)return"undefined"!==typeof b?b:NaN;if(null==f||"string"!==typeof f&&isNaN(f))return NaN;f=String(f);if(!f.trim())return void 0!==b?b:NaN;b=m.parse(f,{strict:e});isNaN(b)&&f.trim().length&&(b=e?m.parse(f,{strict:e,locale:"en-US"}):Number(f));return isNaN(b)||void 0===d||0>d?b:m.round(b,d)};h.parsePercentOrCurrency=function(f,d,b,e,c){"string"===typeof f&&(f=f.replace("%",""),d&&(d=d.split(";")[0].replace("0",
""),f=f.replace(d,"")));return h.parseNumber(f,b,e,c)};h.compareEqual=function(f,d,b){return void 0===b?f===d:Number(Number(f).toFixed(b))===Number(Number(d).toFixed(b))};return h})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function m(d,b,e,c){d=void 0===d||null===d;return d!=(void 0===b||null===b)?(b=d?-1:1,(void 0===c?e:c)?-b:b):d?0:null}function h(d){var b=/^(.+)\s([1-9]\d*)$/.exec(d);return b?{base:b[1],number:b[2]}:/^[1-9]\d*$/.test(d)?{base:"",number:+d}:{base:d,
number:0}}var k={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(d,b,e,c){c=m(d,b,e,c);if(null!==c)return c;d=Number(d);b=Number(b);c=d>b?1:d<b?-1:0;return e?-c:c},compareString:function(d,b,e,c){c=m(d,b,e,c);if(null!==c)return c;d=String(d);b=String(b);c=d.localeCompare(b);return e?-c:c}},f=/^(.+)\s([1-9]\d*)(\D*)$/;k.compareNames=function(d,b,e,c){var g=h("string"===typeof d?d.toLowerCase():d),a=h("string"===typeof b?b.toLowerCase():
b),p=null;if(g.base===a.base)p=k.compareNumeric(g.number,a.number,e,c);else{var m=f.exec(g.base);if(m){var l=f.exec(a.base);l&&m[1]===l[1]&&m[3]===l[3]&&(p=k.compareNumeric(m[2],l[2],e,c))}null===p&&(p=k.compareString(g.base,a.base,e,c))}return p||k.compareString(d,b,e,c)};k.compare=function(d,b,e,c){var g=m(d,b,e,c);if(null!==g)return g;g=typeof d;typeof b!=g&&(g="");switch(g){case "number":case "boolean":break;case "object":d=d.valueOf();b=b.valueOf();break;default:return k.compareString(d,b,e,
c)}g=d>b?1:d<b?-1:0;return e?-g:g};return k})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],function(m){var h={},k={}.toString();h.arraysEqual=function(f,d){if(!f&&!d)return!0;if(!f||!d||f.length!==d.length)return!1;for(var b=0;b<f.length;b++)if(f[b]!==d[b])return!1;return!0};h.composeIdentityFunction=function(f,d){var b="function"===typeof f?f:f?function(b){return b[f]}:function(b){return b};return function(e){return(e=b(e))&&e.toString?e.toString():d&&void 0===
e?e:String(e)}};h.removeDuplicates=function(f,d){var b=[],e={};d=h.composeIdentityFunction(d,!0);m.forEach(f,function(c,g){var a=d(c);a===k&&(void 0===c["__ArrayUtil.js_uniqueKey__"]&&(c["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+g),a=c["__ArrayUtil.js_uniqueKey__"]);void 0===a||a in e||(e[a]=c,b.push(c))});return b};h.splitArrayToBunches=function(f,d){d=d||100;for(var b=[],e,c=0,g=f.length;c<g;c++)e&&e.length!==d||(e=[],b.push(e)),e.push(f[c]);return b};return h})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DomUtil":function(){define("dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on ../../utils/ObjectUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(m,h,k,f,d,b,e){var c=Object.assign({},e);c.select=function(b){return c.addTag(b,"selected")};c.unselect=function(b){return c.removeTag(b,"selected")};c.floatStart=function(b){return c.addTag(b,"esriMapsAnalystXFloatStart")};c.floatEnd=function(b){return c.addTag(b,"esriMapsAnalystXFloatEnd")};c.addSpacer=function(b,a){b=m.create("div",{"class":"esriMapsAnalystXSpacer",innerHTML:"\x26nbsp;"},b);if(a)c[a](b);return b};c.getAndUpdateNumber=function(c,a){if(!c)return NaN;var d=c.get&&c.set;void 0===
a&&(a=0);var g=b.parseNumber(d?c.get("value"):c.value,a);isNaN(g)||(d?c.set("value",b.formatNumber(g,a)):c.value=b.formatNumber(g,a));return g};c.getAndUpdateString=function(b){if(!b)return null;if(b.get&&b.set){var a=b.get("value").trim();b.set("value",a)}else a=b.value.trim(),b.value=a;return a};c.getScreenScaleFactor=function(){return c.getTextBox("",{style:"width: 72pt; height: 72pt"}).w/96};c.positionAtCenter=function(b,a){if(b&&a){var c=h.position(b);a=h.position(a);c.w&&c.h&&a.w&&a.h&&k.set(b,
{left:(a.w-c.w)/2+"px",top:(a.h-c.h)/2+"px"})}};c.showAroundOverlay=function(b,a){a=a||{};c.removeAroundOverlay(b);var g={w:"width",h:"height",l:"left",t:"top",r:"right",b:"bottom"},e=h.position(b);if(a.viewPortContainer){var f=h.position(a.viewPortContainer),t=e.x,u=e.y;e.x=Math.max(e.x,f.x);e.w-=e.x-t;e.y=Math.max(e.y,f.y);e.h-=e.y-u;e.w=Math.min(e.w,f.x+f.w-e.x);e.h=Math.min(e.h,f.y+f.h-e.y)}b.__aroundOverlays=(a.placeInNode?[{l:0,t:-e.y,w:e.w,h:e.y},{l:e.w,t:-e.y,w:document.body.clientWidth-(e.x+
e.w),h:document.body.clientHeight},{l:0,t:e.h,w:e.w,h:document.body.clientHeight-(e.y+e.h)},{l:-e.x,t:-e.y,w:e.x,h:document.body.clientHeight}]:[{l:e.x,t:0,w:e.w,h:e.y},{w:document.body.clientWidth-(e.x+e.w),r:0,t:0,b:0},{l:e.x,h:document.body.clientHeight-(e.y+e.h),w:e.w,b:0},{l:0,t:0,w:e.x,b:0}]).map(function(c){var d=m.create("div",{"class":a.overlayClass||"esriMapsAnalystXNodeAroundOverlay"},a.placeInNode?b:document.body),e={position:"absolute"},f;for(f in g)void 0!==c[f]&&(e[g[f]]=Math.round(c[f])+
"px");k.set(d,e);return d});e=function(){c.removeAroundOverlay(b)};a.removeOnClick&&(b.__aroundOverlaysRemoveHandle=d.once(document.body,"click",e));b.__aroundOverlaysResizeHandle=d(window,"resize",function(){c.showAroundOverlay(b,a)});var v;b.__aroundOverlaysSetIntervalHandle=setInterval(function(){if(v){var d=h.position(b);d.x==v.x&&d.y==v.y&&d.w==v.w&&d.h==v.h||c.showAroundOverlay(b,a)}else v=h.position(b)},50);return{remove:e}};c.removeAroundOverlay=function(b){b.__aroundOverlays&&b.__aroundOverlays.forEach(function(a){m.destroy(a)});
delete b.__aroundOverlays;b.__aroundOverlaysRemoveHandle&&b.__aroundOverlaysRemoveHandle.remove();delete b.__aroundOverlaysRemoveHandle;b.__aroundOverlaysResizeHandle&&b.__aroundOverlaysResizeHandle.remove();delete b.__aroundOverlaysResizeHandle;clearInterval(b.__aroundOverlaysSetIntervalHandle);delete b.__aroundOverlaysSetIntervalHandle};c.getDocumentStyleDeclaration=function(b){function a(c){var d;try{d=c.rules||c.cssRules}catch(v){d=null}if(d)for(c=0;c<d.length;c++){var e=d[c];if(e.styleSheet){if(e=
a(e.styleSheet))return e}else if(e.selectorText==b)return e.style}}for(var c=0;c<document.styleSheets.length;c++){var d=a(document.styleSheets[c]);if(d)return d}return null};c.getNodeFontFamily=function(b){return(b=k.get(b,"fontFamily")||k.getComputedStyle(b)["font-family"])?b.replace(/'|"/g,"").split(",")[0]:b};c.getNodeFontSize=function(b){return k.toPixelValue(b,k.get(b,"fontSize"))};c.listenToNodeAdded=function(b,a,d){if(c.isNodeInLayout(b))a();else{b.__listenToNodeAddedHandle&&b.__listenToNodeAddedHandle.remove();
var e=setInterval(function(){c.isNodeInLayout(b)&&(b.__listenToNodeAddedHandle&&b.__listenToNodeAddedHandle.remove(),a())},d||100);b.__listenToNodeAddedHandle={remove:function(){clearInterval(e);delete b.__listenToNodeAddedHandle}};return b.__listenToNodeAddedHandle}};c.isNodeVisible=function(b){return c.isChildOf(b,document.body,function(a){return!f.contains(a,"dijitHidden")&&"hidden"!=k.get(a,"visibility")})};c.enableHyperlink=function(b,a){a?f.replace(b,"esriMapsAnalystXLink","esriMapsAnalystXLinkDisabled"):
f.replace(b,"esriMapsAnalystXLinkDisabled","esriMapsAnalystXLink")};return c})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/MouseUtil":function(){define(["dojo/dom-geometry","esri/dijit/geoenrichment/utils/MouseUtil"],function(m,h){var k;h.unitTesting_setCursorOverNode=function(f){f=m.position(f);h.unitTesting_setCursorPosition(f.x+f.w/2,f.y+f.h/2)};h.unitTesting_setCursorPosition=function(f,d){h._latestEvent={clientX:f,pageX:f,clientY:d,pageY:d}};h.unitTesting_lockPosition=function(f){k=f};
h.unitTesting_shiftMousePosition=function(f,d){h.unitTesting_setCursorPosition(h._latestEvent.clientX+(f||0),h._latestEvent.clientY+(d||0))};h._setLatestEvent=function(f){k||(h._latestEvent=f)};return h})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(m,h,k,f,d,b){var e={_latestEvent:null,_setLatestEvent:function(b){e._latestEvent=b}};k("touch")?(h(document.body,f.press,function(b){e._setLatestEvent(e.fixTouchEvent(b,
!0))}),h(document.body,f.move,function(b){e._setLatestEvent(e.fixTouchEvent(b,!0))})):h(document.body,"mousemove",function(b){e._setLatestEvent(e.fixTouchEvent(b,!0))});var c;h(document.body,"mousedown",function(){c||(c=!0,h.once(document.body,"mouseup, click",function(){c=!1}))});e.getCursorPosition=function(){return e._latestEvent};e.isMouseOver=function(c,a){var f=a&&a.event||e._latestEvent;if(!(c&&c.parentNode&&c.getBoundingClientRect&&f))return!1;if(a&&a.checkAllChildren){a=m.mixin({},a);delete a.checkAllChildren;
var g=!1;b.traverseChildren(c,function(b){if(e.isMouseOver(b,a))return g=!0});return g}return e.isMouseOverBox(d.position(c),a)};e.isMouseOverBox=function(b,a){if(!b)return!1;var c=a&&a.event||e._latestEvent;a&&a.ignoreBorderTolerance&&(a=a.ignoreBorderTolerance,b=m.mixin({},b),b.x+=a,b.y+=a,b.w-=2*a,b.h-=2*a);return b.x<=c.clientX&&b.x+b.w>=c.clientX&&b.y<=c.clientY&&b.y+b.h>=c.clientY};e.fixTouchEvent=function(b,a){b=a?m.mixin({},b):b;b.touches&&1===b.touches.length?(a=b.touches[0],b.clientX=a.clientX,
b.clientY=a.clientY,b.pageX=a.pageX,b.pageY=a.pageY):b.changedTouches&&1===b.changedTouches.length&&(a=b.changedTouches[0],b.clientX=a.clientX,b.clientY=a.clientY,b.pageX=a.pageX,b.pageY=a.pageY);return b};e.isBeingDragged=function(){return c};e.addOverOutHandler=function(b){function a(){clearTimeout(d);c&&c.remove()}var c,d,f=h(b.node,"mouseover",function(f){function g(){e.isMouseOver(b.node)&&(b.onMouseOver(f),c=h(document.body,"mousemove",function(c){e.isMouseOver(b.node)||(a(),b.onMouseOut(c))}))}
a();b.delayTimeout?d=setTimeout(g,b.delayTimeout):g()});return{remove:function(){f.remove();a()}}};e.addOutHandler=function(b,a){return h(document.body,"mousemove",function(c){e.isMouseOver(b,{checkAllChildren:!0})||a(c)})};return e})},"widgets/BusinessAnalyst/esriAnalystX/dijit/tooltips/TooltipUtil":function(){define("dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/dom-class dojo/query dojo/on dojox/gfx dojo/sniff dojo/aspect dojox/uuid/generateRandomUuid dijit/Tooltip ../utils/DomUtil ../utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/domReady!".split(" "),
function(m,h,k,f,d,b,e,c,g,a,p,r,l,t){function u(){q&&(q.isMultilineContainer?w.hideTooltipForNode(q):(clearInterval(q.__autoTooltipInLayoutCheckHandle),delete q.__autoTooltipInLayoutCheckHandle,p.hide(q)),q=null)}function v(a,b){b=b||"";var c=m.create("div",{class:"esriMapsAnalystXValidationTooltip"+b},document.body);!b&&m.create("div",{class:"esriMapsAnalystXValidationTooltipTip"+b},c);m.create("div",{innerHTML:a,class:"esriMapsAnalystXValidationTooltipBody"+b},c);h.set(c,"position","fixed");return c}
function x(a,c){function d(){a&&(document.body.removeChild(a),g.forEach(function(a){a.remove()}),a=g=null)}c=c.textbox||c;var e=k.getMarginBox(a),f=k.position(c);"rtl"===document.dir?h.set(a,{left:f.x-e.w+"px",top:f.y+f.h/2-e.h/2+"px"}):h.set(a,{left:f.x+f.w+"px",top:f.y+f.h/2-e.h/2+"px"});var g=[b(document.body,"mousedown, keydown",d),b(c,"blur",d)];return{remove:d}}function n(b,c,d){function e(){var a=m.create("div",{class:"esriMapsAnalystXClosableTooltipTip"},l);f.add(a,"right"===d?"esriMapsAnalystXClosableTooltipTipRight":
"esriMapsAnalystXClosableTooltipTipLeft")}function g(){n=m.create("div",{class:"esriMapsAnalystXClosableTooltipBody"},l);m.create("div",{innerHTML:b,class:"esriMapsAnalystXClosableTooltipLabel"},n);k=m.create("div",{class:"esriMapsAnalystXClosableTooltipCloseButton esriMapsAnalystXCloseWindow esriMapsAnalystXCloseWindowWhite"},n)}c={class:"esriMapsAnalystXClosableTooltip "+(c||"")};c.id=a();var l=m.create("div",c,document.body),n,k;"right"!==d?(g(),e()):(e(),g());h.set(l,"position","fixed");return{tooltip:l,
body:n,closeButton:k}}function B(a,c,d,e){var f=k.getMarginBox(a.tooltip),g=k.position(c);"rtl"===document.dir&&"right"!==e||"rtl"!==document.dir&&"right"===e?h.set(a.tooltip,{left:g.x+g.w+"px",top:g.y+g.h/2-f.h/2+"px"}):h.set(a.tooltip,{left:g.x-f.w+"px",top:g.y+g.h/2-f.h/2+"px"});var l,n,m,p=function(){l&&clearTimeout(l);n&&clearInterval(n);m&&m.remove();a.tooltip.parentNode===document.body&&document.body.removeChild(a.tooltip)};n=setInterval(function(){r.isNodeInLayout(c)||p();r.isNodeVisible(c)?
r.show(a.tooltip):r.hide(a.tooltip)},300);d&&(l=setTimeout(p,d));m=b(a.closeButton,"click",function(){p()});a.tooltip._removeFunc=p;return a.tooltip}var w={},y={};w.hideTooltipForNode=t.hideTooltipForNode;w.setTooltipToNode=t.setTooltipToNode;w.createTooltip=function(c,d,e){var f={orientation:k.isBodyLtr(document)?"right":"left",offset:{x:15,y:0}};d&&(f.innerHTML=d);e&&(f=Object.assign(f,e));f.id=a();f.toMouseCursor&&(f.mouseEvent=l.getCursorPosition(),delete f.toMouseCursor);d=f.mouseEvent;delete f.mouseEvent;
e=f.htmlFragment;delete f.htmlFragment;var g=f.widget;delete f.widget;var n=f.orientation;delete f.orientation;var p=f.offset;delete f.offset;var z=f.horizontalOffset;delete f.horizontalOffset;var q=m.create("div",f,c?c.container:document.body);e?m.place(e,q):g&&g.placeAt(q);h.set(q,"position","fixed");var r=k.getMarginBox(q),C=function(a,b){var c=a.touches?event.touches[0].clientX:a.clientX;a=a.touches?event.touches[0].clientY:a.clientY;var d,e,f=p.x,g=p.y;"left"===n?0>c-r.w-f&&(d="right"):c+r.w+
f>document.body.clientWidth&&(d="left");a+r.h+g>document.body.clientHeight&&(e="above");d=d||n;h.set(q,{left:b?b+"px":c+("left"===d?-r.w-f:f)+"px",top:a+("above"===e?-r.h-g:g)+"px"});q.style.display=""};d&&C(d,z);f=[];f.push(b(c?c:document.body,c?"mouse-move, mousemove":"mousemove, touchmove",function(a){C(a,z)}));f.push(b(c?c:document.body,c?"mouse-out, mouseout":"mouseout, touchend",function(a){q.style.display="none"}));c={};c.handlers=f;c.tooltip=q;y[q.id]=c;return q};w.removeTooltip=function(a){if(a){a=
"string"===typeof a?a:a.id;var b=y[a];delete y[a];b&&(b.handlers.forEach(function(a){a.remove()}),m.destroy(b.tooltip))}};var A={};w.registerTooltipForSlider=function(c,d,e,f){var l={offsetX:0,offsetY:0,class:"esriMapsAnalystXTooltip"};d&&(l=Object.assign(l,d));l.id=a();var n=m.create("div",l,document.body);n.style.display="none";h.set(n,"position","fixed");var p=!1,q=function(a,d){if(!p){p=!0;n.style.display="";n.innerHTML=d();var e=k.getMarginBox(n),f=k.position(a);h.set(n,{left:f.x+f.w/2-e.w/2+
l.offsetX+"px",top:f.y-e.h-5+l.offsetY+"px"});var m=[];m.push(g.after(c,"onChange",function(){n.innerHTML=d();f=k.position(a);h.set(n,{left:f.x+f.w/2-e.w/2+"px",top:f.y-e.h-5+"px"})}));var q=function(){n.style.display="none";m.forEach(function(a){a.remove()});p=!1},z=!1;m.push(b(a,"mousedown, mouseDown, mouse-down",function(){z=!0;m.push(b(document,"mouseup, mouseUp, mouse-up",function(){q()}))}));m.push(b(a,"mouseout, mouseOut, mouse-out",function(){z||q()}))}};d=[];d.push(b(c.sliderHandle,"mouseover, mouseOver, mouse-over",
function(){f&&c.isSliderDisabled&&c.isSliderDisabled()||q(c.sliderHandle,function(){var a=f?c.get("value")[0]:c.get("value");return e?e(a):a})}));f&&d.push(b(c.sliderHandleMax,"mouseover, mouseOver, mouse-over",function(){c.isSliderDisabled&&c.isSliderDisabled()||q(c.sliderHandleMax,function(){return e?e(c.get("value")[1]):c.get("value")[1]})}));d.push(g.before(c,"destroy",function(){w.unregisterTooltipForSlider(c)}));c.tooltipId=n.id;var z={};z.tooltip=n;z.handlers=d;A[n.id]=z};w.unregisterTooltipForSlider=
function(a){var b=A[a.tooltipId];b&&(b.handlers.forEach(function(a){a.remove()}),m.destroy(b.tooltip));delete A[a.tooltipId];delete a.tooltipId};var q=null;w.autoTooltip=function(a,d,e){"string"===typeof d&&(d=d.split(" ").filter(function(a){return a&&!!a.trim().length}));d=d||[];d.push("TrimWithEllipses");e=e||[];e.push("esriMapsAnalystXInfoIcon");for(var f=0;f<d.length;f++)b(a,"."+d[f]+":mouseover, "+d[f]+":touchstart, ",function(a){this!==q&&this.offsetWidth<this.scrollWidth&&!this.noAutoTooltip&&
(a=getComputedStyle(this).width,a=Number(a.substr(0,a.length-2)),0>a-Math.round(a)&&this.offsetWidth==this.scrollWidth-1||(u(),q=this,a=q.autoTooltip||q.textContent||q.value,q.title&&(a+=" ("+q.title+")"),a&&p.show(a,q,["above","below"]),b.once(q,"mouseout, touchstart, touchout",function(){u()}),q.__autoTooltipInLayoutCheckHandle=setInterval(function(){r.isNodeInLayout(q)||u()},500)))});if(c("touch"))for(f=0;f<e.length;f++)b(a,"."+e[f]+":touchstart ",function(a){this!==q&&(q=this,q.title&&(p.show(q.title,
q,["above","below"]),b.once(q,"touchstart, touchout",function(){p.hide(q);q=null})))})};w.addAutoTooltipsToTabContainer=function(a){d(".tabLabel",a.domNode).forEach(function(a){f.add(a,"TrimWithEllipses")});w.autoTooltip(a)};w.setMultilineText=function(a,b,c,d){c=c||2;b=b.trim();d=d||["above","below"];f.remove(a,"TrimWithEllipses");a.style.overflow="hidden";a.innerHTML="";for(var e=b,g=!1;e;){c--;var l=m.create("div",null,a);l.style.overflow="hidden";l.style.whiteSpace="nowrap";for(var n=e;n;)if(l.textContent=
n,l.offsetWidth<l.scrollWidth-1)n=(n=n.match(/^(.*[^\s]+)\s+[^\s]+$/))&&n[1]||"";else break;!n||!c&&n!==e?(l.textContent=e,e="",l.style.textOverflow="ellipsis",g=!0):e=e.substr(n.length).trim()}g&&w.setTooltipToNode(a,function(){u();q=a;q.isMultilineContainer=!0;return b},{position:d})};w.showErrorTip=function(a,b){return x(v(b),a.domNode||a)};w.showNewStyleErrorTip=function(a,b,c){return x(v(b,"NewStyle"+(c?" esriMapsAnalystXWarningStyle":"")),a.domNode||a)};w.showAlertTooltip=function(a){a&&a.node&&
a.message&&(p.show(a.message,a.node,a.position||["above","below"]),setTimeout(function(){p.hide(a.node)},a.timeout||5E3))};w.showClosableTooltip=function(a){var b=n(a.message,a.tooltipClass,a.position);return B(b,a.component,a.timeout,a.position)};w.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};w.showClosableTooltipOnVerticalBracket=function(a){var c=a.below||a.above,d=k.position(a.above,!0),f=k.position(c,!0),g="rtl"!==document.dir?"start"===a.direction:"end"===a.direction,
l=d.x+d.w*(g?0:1),d=d.y,p=f.y+f.h,q=m.create("div",{class:"esriMapsAnalystFlexibleTooltip_tooltip esriMapsAnalystXNonSelectable"},document.body),x=m.create("div",{class:"esriMapsAnalystFlexibleTooltip_surfaceContainer"},q),f={},l={top:d-2,left:l+(g?-3:3),height:p-d+4,width:10},y;for(y in l)f[y]=l[y]+"px";h.set(q,f);var w=e.createSurface(x,l.width,l.height);w.clear();w.createPolyline([{x:g?l.width:0,y:0},{x:g?0:l.width,y:0},{x:g?0:l.width,y:l.height},{x:g?l.width:0,y:l.height}]).setStroke({color:"#6E6E6E",
width:6});a.component=q;var g=n(a.message,a.tooltipClass,a.position),t=function(){clickHandler&&clickHandler.remove();u&&clearInterval(u);w&&w.clear();m.destroy(x);m.destroy(q)},u=setInterval(function(){r.isNodeInLayout(c)||t();r.isNodeVisible(c)?h.set(q,"visibility","visible"):h.set(q,"visibility","hidden")},300);a.timeout&&setTimeout(t,a.timeout);clickHandler=b(g.closeButton,"click",t);tooltip=B(g,a.component,a.timeout,a.position);var z=tooltip._removeFunc;tooltip._removeFunc=function(){z();t()};
return tooltip};return w})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function m(){for(var b=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>b.length;)b="0"+b;return b}var h=m(),k=m(),k=k.substring(0,4)+"-4"+k.substring(5,8),f=m(),f="8"+f.substring(1,4)+"-"+f.substring(4,8),d=m();return(h+"-"+k+"-"+f+d).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],
function(m){m.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(h,k){if(!h)throw k||(k="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(k);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=
function(h){h=h.toString();var k=m.isString(h)&&36==h.length&&h==h.toLowerCase();if(k){h=h.split("-");var k=5==h.length&&8==h[0].length&&4==h[1].length&&4==h[2].length&&4==h[3].length&&12==h[4].length,f;for(f in h)var d=parseInt(h[f],16),k=k&&isFinite(d)}return k};dojox.uuid.getVariant=function(h){if(!dojox.uuid._ourVariantLookupTable){var k=dojox.uuid.variant,f=[];f[0]=k.NCS;f[1]=k.NCS;f[2]=k.NCS;f[3]=k.NCS;f[4]=k.NCS;f[5]=k.NCS;f[6]=k.NCS;f[7]=k.NCS;f[8]=k.DCE;f[9]=k.DCE;f[10]=k.DCE;f[11]=k.DCE;
f[12]=k.MICROSOFT;f[13]=k.MICROSOFT;f[14]=k.UNKNOWN;f[15]=k.UNKNOWN;dojox.uuid._ourVariantLookupTable=f}h=h.toString();h=h.charAt(19);h=parseInt(h,16);dojox.uuid.assert(0<=h&&16>=h);return dojox.uuid._ourVariantLookupTable[h]};dojox.uuid.getVersion=function(h){dojox.uuid.assert(dojox.uuid.getVariant(h)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");h=h.toString();h=h.charAt(14);return parseInt(h,16)};dojox.uuid.getNode=function(h){dojox.uuid.assert(dojox.uuid.getVersion(h)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");h=h.toString();return h.split("-")[4]};dojox.uuid.getTimestamp=function(h,k){dojox.uuid.assert(dojox.uuid.getVersion(h)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");h=h.toString();k||(k=null);switch(k){case "string":case String:return dojox.uuid.getTimestamp(h,Date).toUTCString();case "hex":var f=h.split("-");h=f[0];k=f[1];f=f[2];f=f.slice(1);h=f+k+h;dojox.uuid.assert(15==
h.length);return h;case null:case "date":case Date:return f=h.split("-"),h=parseInt(f[0],16),k=parseInt(f[1],16),f=(parseInt(f[2],16)&4095)<<16,f=4294967296*(f+k),f+=h,new Date(f/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+k)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place dojox/gfx ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil dojo/domReady!".split(" "),
function(m,h,k,f,d,b,e,c,g,a,p,r,l,t,u,v){function x(){}var n={},B=m(a._MasterTooltip,{_customClasses:null,_customStyle:null,_orientKey:null,addCustomClasses:function(a){a&&(k.add(this.domNode,a),this._customClasses=a)},setCustomStyle:function(a){this._customStyle=a},show:function(b,c,d,e,g,l,n){if(!this.aroundNode||this.aroundNode!==c||this.containerNode.innerHTML!=b)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof b?this.containerNode.innerHTML=b:(this.containerNode.innerHTML=
"",f.place(b.domNode||b,this.containerNode));g&&this.set("textDir",g);this.containerNode.align=e?"right":"left";var k=p.around(this.domNode,c,d&&d.length?d:a.defaultPosition,!e,h.hitch(this,"orient")),m=k.aroundNodePos;"M"==k.corner.charAt(0)&&"M"==k.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-k.y+"px",this.connectorNode.style.left=""):"M"==k.corner.charAt(1)&&"M"==k.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>
1)-k.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");this._drawBackground();this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=c;this.onMouseEnter=l||x;this.onMouseLeave=n||x}},orient:function(a,b,c,e,f){this.connectorNode.style.top="";var l=e.h;e=e.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[this._orientKey=b+"-"+c];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var n=d.position(this.domNode);if(g("ie")||g("trident"))n.w+=2;d.setMarginBox(this.domNode,{w:Math.min(Math.max(e,1),n.w)});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=d.position(a),b=this.connectorNode.offsetHeight,
a.h>l?(this.connectorNode.style.top=l-(f.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(f.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");this._drawBackground();return Math.max(0,n.w-e)},_surface:null,_surfaceContainer:null,_drawBackground:function(){if(this._orientKey){var a=this.domNode.clientWidth,b=this.domNode.clientHeight,c=d.position(this.domNode),e=d.position(this.connectorNode),
g=d.position(this.containerNode);e.x-=c.x;e.y-=c.y;g.x-=c.x;g.y-=c.y;g.x+=1;g.y+=1;g.w-=2;g.h-=2;this._surface&&this._surface.destroy();this._surfaceContainer&&f.destroy(this._surfaceContainer);c=this._surfaceContainer=f.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode,"first");c.style.pointerEvents="none";a=this._surface=r.createSurface(c,a,b);b=[{x:g.x,y:g.y},{x:g.x+g.w,y:g.y},{x:g.x+g.w,y:g.y+g.h},{x:g.x,y:g.y+g.h},{x:g.x,y:g.y}];c=e.x+e.w/2;e=e.y+e.h/2;switch(this._orientKey){case "BL-TL":case "BM-TM":case "BR-TR":g=
[{x:c-5,y:g.y},{x:c,y:e},{x:c+5,y:g.y}];b.splice.apply(b,[1,0].concat(g));break;case "ML-MR":case "BL-BR":g=[{x:g.x+g.w,y:e-5},{x:c,y:e},{x:g.x+g.w,y:e+5}];b.splice.apply(b,[2,0].concat(g));break;case "TM-BM":case "TL-BL":case "TR-BR":g=[{x:c+5,y:g.y+g.h},{x:c,y:e},{x:c-5,y:g.y+g.h}];b.splice.apply(b,[3,0].concat(g));break;case "MR-ML":case "BR-BL":g=[{x:g.x,y:e+5},{x:c,y:e},{x:g.x,y:e-5}],b.splice.apply(b,[4,0].concat(g))}g=a.createPolyline(b);e="function"===typeof this._customStyle?this._customStyle():
this._customStyle;g.setFill(e&&e.backgroundColor||"white").setStroke({color:"#d3d3d3",width:1,join:"round"});e&&e.color&&(this.containerNode.style.color=e.color)}}}),w={show:function(a,b,c,d,e){"string"===typeof c&&(c=[c]);c=c&&c.map(function(a){return{after:"after-centered",before:"before-centered"}[a]||a});var f=new B;e&&f.setCustomStyle(e);f.addCustomClasses(d);f.show(a,b,c);return f}};n.setTooltipToNode=function(a,b,d){function f(){!g&&n.showTooltipForNode(a,b,d)}d=d||{};if(a&&(n.hideTooltipForNode(a),
a.__setTooltipToNodeMouseEnterHandle&&a.__setTooltipToNodeMouseEnterHandle.remove(),b)){var g=!1;l.isMobileDevice()?a.__setTooltipToNodeMouseEnterHandle=t.addNoDragClickHandler(a,f):a.__setTooltipToNodeMouseEnterHandle=e(a,c.enter,f);d.showTooltip&&f();return{remove:function(){b=null;n.hideTooltipForNode(a)},suspend:function(){n.hideTooltipForNode(a);g=!0},resume:function(){g=!1},refresh:function(){a._shownTooltip&&f()}}}};n.showTooltipForNode=function(a,b,d){function f(){n.hideTooltipForNode(a);
var b=Array.isArray(d.classes)?d.classes.join(" "):d.classes,b=(b||"")+" esriGETooltip";d.notRestricted&&(b+=" notRestricted");a._shownTooltip=h=w.show(g,a,d.position||["after","before"],b,d.style)}if(a){n.hideTooltipForNode(a);var g="function"==typeof b?b():b;if(g){d.textAlign&&(g="\x3cdiv class\x3d'"+("start"===d.textAlign?"esriGEStart":"end"===d.textAlign?"esriGEEnd":"")+"'\x3e"+g+"\x3c/div\x3e");k.add(a,"esriGESimpleTextTooltip");var h;f();var m=n.hideTooltipForNode.bind(n,a);l.isMobileDevice()?
a.__setTooltipToNodeMouseLeaveHandle=e(document.body,"touchstart",function(b){v.isMouseOver(a,{event:b})||m()}):a.__setTooltipToNodeMouseLeaveHandle=e.once(a,c.leave,function(){!d.stayOnHover&&m()});d.ignoreNodeRemoval||(a.__setTooltipToNodeInLayoutHandle=setInterval(function(){!u.isNodeInLayout(a)&&m()},300));l.isMobileDevice()||(a.__setTooltipToNodeMouseOverHandle=setInterval(function(){d.stayOnHover&&v.isMouseOver(h.domNode)||v.isMouseOver(a)||m()},300),a.__setTooltipToNodeClickHandle=e(a,"click",
function(b){d.hideOnClick?m():!a._shownTooltip&&f()}),d.stayOnHover&&(a.__setTooltipToNodeMouseLeaveMasterHandle=e(h.domNode,c.leave,m)));return a._shownTooltip}}};n.isShown=function(a){return!(!a||!a._shownTooltip)};n.hideTooltipForNode=function(a){a&&(a.title="",k.remove(a,"esriGESimpleTextTooltip"),a._shownTooltip&&a._shownTooltip.destroy(),delete a._shownTooltip,a.__setTooltipToNodeMouseLeaveHandle&&a.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(a.__setTooltipToNodeInLayoutHandle),
clearInterval(a.__setTooltipToNodeMouseOverHandle),a.__setTooltipToNodeClickHandle&&a.__setTooltipToNodeClickHandle.remove(),a.__setTooltipToNodeMouseLeaveMasterHandle&&a.__setTooltipToNodeMouseLeaveMasterHandle.remove())};var y,A;n.autoTooltip=function(a){e(a,".TrimWithEllipses:mouseover",function(){if(this!==y&&this.offsetWidth<this.scrollWidth){var a=function(){y=null;A&&(A.tooltip.destroy(),A.mouseOutH.remove(),A.mouseMoveH.remove(),A=null)};a();y=this;A={tooltip:w.show(y.textContent,y,["above",
"below"]),mouseOutH:e.once(y,"mouseout, mousedown, touchstart",a),mouseMoveH:e(document.body,"mousemove",function(){v.isMouseOver(y)||a()})}}})};n.showClosableTooltip=function(a){var b=n._createClosableTooltip(a.message,a.tooltipClass,a.position);return n._placeClosableTooltip(b,a.node,a.timeout,a.position,a.onClosed)};n.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};n._createClosableTooltip=function(a,b,c){function d(){var a=f.create("div",{"class":"esriGEClosableTooltipTip"},
g);k.add(a,"right"===c?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function e(){l=f.create("div",{"class":"esriGEClosableTooltipBody"},g);f.create("div",{innerHTML:a,"class":"esriGEClosableTooltipLabel"},l);n=f.create("div",{"class":"esriGEClosableTooltipCloseButton"},l)}var g=f.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable "+(b||"")},document.body),l,n;"right"!==c?(e(),d()):(d(),e());g.style.position="fixed";return{tooltip:g,body:l,closeButton:n}};n._placeClosableTooltip=
function(a,c,f,g,l){function n(){var e=d.position(c),f=e.x+";"+e.y+";"+e.w+";"+e.h;f!==k&&(k=f,f=d.getMarginBox(a.tooltip),b.set(a.tooltip,{left:(h?e.x+e.w:e.x-f.w)+"px",top:e.y+e.h/2-f.h/2+"px"}))}var h="rtl"===document.dir&&"right"!==g||"rtl"!==document.dir&&"right"===g,k;n();var m,p,r,x,y,w=function(){m&&clearTimeout(m);p&&clearInterval(p);r&&clearInterval(r);x&&x.remove();a.tooltip.parentNode&&a.tooltip.parentNode.removeChild(a.tooltip)};p=setInterval(function(){u.isNodeInLayout(c)&&c.parentNode||
(y=!1,w());u.isNodeVisible(c)&&u.isNodeOnscreen(c)?(y=!0,u.show(a.tooltip)):(y=!1,u.hide(a.tooltip))},0);r=setInterval(function(){y&&n()},0);f&&(m=setTimeout(w,f));x=e(a.closeButton,"click",function(){w();l&&l()});a.tooltip._removeFunc=w;return a.tooltip};n.showTooltipForNode(document.body,"Normal \x3cb\x3eBold\x3c/b\x3e \x3ci\x3eItalic\x3c/i\x3e",{});n.hideTooltipForNode(document.body);return n})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],
function(m,h,k,f){var d={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(b,e,c){c=c||{};return k.isMobileDevice()?d._addMobile(b,e,c):d._addPC(b,e,c)},_addPC:function(b,d,c){var e=c.tolerance||0,a,h,k=m(b,"mousedown",function(b){h&&h.remove();var c=b.clientX,g=b.clientY,l;a=m(document.body,"mousemove",function(a){if(!a.shiftKey&&!f.isCtrl(a)){var b=a.clientY;if(0<Math.abs(a.clientX-c)||0<Math.abs(b-g))l=!0}});h=m.once(document.body,"mouseup",function(b){a.remove();var f=
b.clientX,h=b.clientY;!l&&Math.abs(f-c)<=e&&Math.abs(h-g)<=e&&d(b)})});return{remove:function(){a&&a.remove();h&&h.remove();k&&k.remove()}}},_addMobile:function(b,e,c){function f(){k&&k.remove();l&&l.remove();t&&t.remove();clearTimeout(u)}var a=c.tolerance||d.MOBILE_TOLERANCE,h,k,l,t,u;h=m(b,"touchstart",function(g){function h(b){return Math.abs(g.clientX-b.clientX)<a&&Math.abs(g.clientY-b.clientY)<a}f();var n;if(c.detectLongPress){var p;l=m(b,"touchmove",function(a){p=a});u=setTimeout(function(){h(p||
g)&&(c.ignoreReleaseIfLongPressHappened&&(n=!0),c.longPressCallback(g))},c.longPressTimeout||d.LONG_PRESS_TIMEOUT)}k=m.once(b,"touchend",function(a){!n&&h(a)&&e(a);f()});t=m.once(b,"touchcancel",f)});return{remove:function(){h&&h.remove();f()}}},addGlobalDragHanlder:function(b){function d(){c&&c.remove();g&&g.remove();a&&a.remove();p&&p.remove();r&&b.destroyDnDBox&&b.destroyDnDBox(r)}b.tolerance=0<b.tolerance?b.tolerance:5;var c,g,a,p,r;return m(b.node,b.downEventName||k.press,function(e){d();if(!b.onMouseDown||
b.onMouseDown(e)){var l=e.clientX,u=e.clientY,v=l,x=u;c=m(document.body,k.move,function(e){function n(){d();b.dragEnded&&b.dragEnded()}e.shiftKey||f.isCtrl(e)||!(Math.abs(l-e.clientX)>=b.tolerance||Math.abs(u-e.clientY)>=b.tolerance)||(c.remove(),b.dragStarted&&!b.dragStarted(e,e.clientX-v,e.clientY-x))||(v=e.clientX,x=e.clientY,r=b.createDnDBox&&b.createDnDBox(),g=m(document.body,k.move,function(a){b.dragMoved&&b.dragMoved(a,a.clientX-v,a.clientY-x,n);v=a.clientX;x=a.clientY}),a=m.once(document.body,
h("ie")||h("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){n()}),p=m(document.body,"keyup",function(a){27==a.keyCode&&(d(),b.dragCanceled&&b.dragCanceled())}))});m.once(document.body,h("ie")||h("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){c.remove()})}})}};return d})},"widgets/BusinessAnalyst/utils/GEUtil":function(){define("dojo/_base/array dojo/when esri/request ./GeocodeUtil esri/geometry/webMercatorUtils esri/dijit/geoenrichment/utils/FileUtil jimu/portalUtils".split(" "),
function(m,h,k,f,d,b,e){return{getAvailableCountries:function(){return e.getPortal(portalUrl).loadSelfInfo().then(function(b){return k({url:(b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Countries",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},handleAs:"json"})})},createRingOrDriveTimes:function(b){return e.getPortal(portalUrl).loadSelfInfo().then(function(c){return k({url:(c&&
c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",useData:JSON.stringify({sourceCountry:b.sourceCountry}),studyAreasOptions:JSON.stringify(b.studyAreasOptions),dataCollections:JSON.stringify(["GlobalIntersect"]),returnGeometry:!0,outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:b.geometry}]),
token:esri.id.credentials[0].token},handleAs:"json"})})},createReport:function(c){var d={appID:"webappbuilder",langCode:"en-us",report:"string"===typeof c.report?c.report:JSON.stringify(c.report),format:"pdf",f:"bin",token:esri.id.credentials[0].token,useData:JSON.stringify({sourceCountry:c.sourceCountry}),studyAreas:JSON.stringify(c.studyAreas),reportFields:JSON.stringify({locationname:c.locationName,latitude:c.lat,longitude:c.long,subtitle:"Prepared by Esri",areadesc2:c.areadesc2})};return e.getPortal(portalUrl).loadSelfInfo().then(function(a){return k({url:(a&&
a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/createReport",content:d,handleAs:"blob"}).then(function(a){return b.saveAs(a,c.reportDownloadName+".pdf")}).otherwise(function(a){alert("Error: "+a)})})},checkCapabilities:function(b){return e.getPortal(portalUrl).loadSelfInfo().then(function(c){var a=!1,d=!1,e=c&&c.user&&c.user.privileges,
f=c&&c.helperServices;c=f.geoenrichment&&f.geoenrichment.url;var f=f.routingUtilities&&f.routingUtilities.url,g=c?c:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&0<b.appProxies.length&&m.some(b.appProxies,function(a){return g.toLowerCase()===a.sourceUrl.toLowerCase()})?d=a=!0:m.forEach(e,function(b){"premium:user:geoenrichment"===b?a=!0:"premium:user:networkanalysis"===b&&(d=!0)});return{hasPrivilege:a&&d,geServiceConfigured:!!c,
dirRoutingServiceConfigured:!!f}})},getCountryForPolygon:function(b,g,a){return e.getPortal(portalUrl).loadSelfInfo().then(function(c){return k({url:(c&&c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",dataCollections:JSON.stringify(["GlobalIntersect"]),outSR:JSON.stringify({wkid:102100}),
studyAreas:JSON.stringify([{geometry:b.toJson()}]),token:esri.id.credentials[0].token},handleAs:"json"}).then(function(c){if(c&&c.results&&1===c.results.length&&1===c.results[0].value.FeatureSet[0].features.length)return c.results[0].value.FeatureSet[0].features[0].attributes.sourceCountry;if(c&&c.results&&1===c.results.length&&1<c.results[0].value.FeatureSet[0].features.length){var e=b.getCentroid(),e=d.xyToLngLat(e.x,e.y),k=function(b){var c="";m.forEach(b,function(b){b.attributes.sourceCountry==
a&&(c=a)});if(c)return c;m.forEach(b,function(a){a.attributes.sourceCountry==g.defaultCountryID&&(c=defaultCountryID)});return c?c:b[0].attributes.sourceCountry};return h(f.reverseGeocode({x:e[0],y:e[1]})).then(function(a){return a&&a.address&&a.address.CountryCode?a.address.CountryCode:k(c.results[0].value.FeatureSet[0].features)}).otherwise(function(){return k(c.results[0].value.FeatureSet[0].features)})}return g.defaultCountryID})})},getGEProxyUrl:function(b){var c=!1;return e.getPortal(portalUrl).loadSelfInfo().then(function(a){geUrl=
a&&a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&0<b.appProxies.length&&m.forEach(b.appProxies,function(a){geUrl.toLowerCase()===a.sourceUrl.toLowerCase()&&(c=a.proxyUrl)});return c})}}})},"widgets/BusinessAnalyst/utils/GeocodeUtil":function(){define(["esri/request","jimu/portalUtils"],function(m,h){return{reverseGeocode:function(k){return h.getPortal(portalUrl).loadSelfInfo().then(function(f){return m({url:(f&&
f.isPortal&&f.helperServices&&f.helperServices.geocode&&0<f.helperServices.geocode.length?f.helperServices.geocode[0].url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer")+"/reverseGeocode",content:{appID:"webappbuilder",f:"json",langCode:"en-us",location:JSON.stringify({x:k.x,y:k.y}),distance:250},handleAs:"json"})})}}})},"esri/dijit/geoenrichment/utils/FileUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./DataUtil","./ImageUtil"],
function(m,h,k,f){function d(){return new m.reject(Error("Saving not supported."))}var b=d,e=/[\\/:*?"<>|]/g,c={savingSupported:function(){return void 0!==window.Blob},saveTextFile:function(a,b,e,f){return c.savingSupported()?c.saveAs(new Blob([a],{type:e||"text/plain"}),b||"text.txt",f):d()},saveImageFile:function(a,b){if(c.savingSupported()){var e;"string"===typeof a?(e=f.base64DataFromDataURL(a),e=k.binaryStringToByteArray(atob(e)).buffer):a instanceof ArrayBuffer&&(e=a);return c.saveAs(e?k.arrayBuffersToBlob([e],
"image/png"):a,b)}d()},_queue:[],_isSavePendingFlag:!1,_saveTimeoutH:null,saveAs:function(a,d,e){return e&&e.addDownloadIntervals?(e=new m,c._queue.push({blob:a,name:d||"download",dfd:e}),c._trySaveAsNext(),e.promise):b(a,c.validateName(d||"download"))},_trySaveAsNext:function(){if(c._queue.length&&!c._isSavePendingFlag){var a=c._queue.shift();c._isSavePendingFlag=!0;h(b(a.blob,c.validateName(a.name))).then(a.dfd.resolve,a.dfd.reject).always(function(){setTimeout(function(){c._isSavePendingFlag=!1;
c._trySaveAsNext()},100)})}},validateName:function(a){return String(a).trim().replace(e,"")}};if(!c.savingSupported())return c;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return b=function(a,b){var c=new m;window.navigator.msSaveOrOpenBlob(a,b)?c.resolve():c.reject(Error("Failed to save or open downloaded file."));return c.promise},c;var g=window.URL||window.webkitURL;if("download"in window.document.createElement("a")){var a=function(a){var b;void 0!==window.MouseEvent?b=new MouseEvent("click",
{bubbles:!0,cancelable:!1}):(b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null));a.dispatchEvent(b)},b=function(b,c){var d=new m,e=g.createObjectURL(b),f=window.document.createElement("a");f.href=e;f.download=c;a(f);setTimeout(function(){g.revokeObjectURL(e);f=null;d.resolve();d=null},1E3);return d.promise};return c}b=function(a,b){var c=new m;a=new File([a],b,{type:a.type});var d=g.createObjectURL(a);window.open(d,"_blank");setTimeout(function(){g.revokeObjectURL(d);
c.resolve()},1E3);return c.promise};return c})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(m,h){function k(b){return"string"==typeof b?{source:b,getLength:function(){return this.source.length},getByte:function(b){return this.source.charCodeAt(b)&255}}:window.ArrayBuffer&&b instanceof ArrayBuffer?{source:new Uint8Array(b),getLength:function(){return this.source.byteLength},getByte:function(b){return this.source[b]}}:
b}function f(b){for(var c=b.length,d=new Uint8Array(b.length),a=0;a<c;a++)d[a]=b.charCodeAt(a);return d}function d(b,c){b=new Uint8Array(b);c=Math.min(c,b.byteLength);for(var d="",a=0;a<c;a++)d+=String.fromCharCode(b[a]);return d}var b={arrayBufferFromBlob:function(b){var c=new m,d=new FileReader;d.onloadend=function(){d.error?c.reject(d.error):c.resolve(d.result)};d.readAsArrayBuffer(b);return c.promise},arrayBuffersToBlob:function(b,c){return new Blob(b,{type:c||"application/octet-stream"})},binaryStringFromByteSource:function(b){if("string"==
typeof b)return b;b=k(b);for(var c=b.getLength(),d=c%4,c=c-d,a="",e=0,f,l,h,m;e<c;)f=b.getByte(e++),l=b.getByte(e++),h=b.getByte(e++),m=b.getByte(e++),a+=String.fromCharCode(f,l,h,m);1==d?a+=String.fromCharCode(b.getByte(e)):2==d?a+=String.fromCharCode(b.getByte(e),b.getByte(e+1)):3==d&&(a+=String.fromCharCode(b.getByte(e),b.getByte(e+1),b.getByte(e+2)));return a},base64FromByteSource:function(b){b=k(b);for(var c=b.getLength(),d=c%3,c=c-d,a,e,f,l,h="",m=0;m<c;m+=3)l=b.getByte(m)<<16|b.getByte(m+1)<<
8|b.getByte(m+2),a=l>>18&63,e=l>>12&63,f=l>>6&63,l&=63,h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l];1==d?(l=b.getByte(m),h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l<<
4&63]+"\x3d\x3d"):2==d&&(l=b.getByte(m)<<8|b.getByte(m+1),h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l<<2&63]+"\x3d");return h},base64FromJson:function(b){return btoa(unescape(encodeURIComponent("string"===typeof b?b:JSON.stringify(b))))}};b.binaryStringToByteArray=f;b.base64ToByteArray=function(b){return f(atob(b))};b.getFirstBytes=
function(b,c){var e;if("string"==typeof b)e=b.substr(0,c);else if(window.ArrayBuffer&&b instanceof ArrayBuffer)e=d(b,c);else if(window.Blob&&b instanceof Blob){e=new m;var a=new FileReader;a.onloadend=function(){a.error?e.resolve(""):e.resolve(d(a.result,c))};a.readAsArrayBuffer(b.slice(0,c))}return h(e||"")};b.isBase64=function(b){return b&&0==b.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(b.replace(/={0,2}$/,""))};b.getContentType=function(d){d=b.getFileExtension(d);
if(null===d)return null;switch(d){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};b.getFileExtension=function(b){var c=b.lastIndexOf(".")+1;return c?b.substr(c).toLowerCase():null};return b})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./UrlUtil"],
function(m,h,k){var f={base64DataToDataURL:function(d,b){if(/^data:image/.test(d))return d;b||(b=atob(d.substr(0,16)),b=f.getImageContentType(b));return"data:"+(b||"image/png")+";base64,"+d},getImageContentType:function(d){if("\u00ff\u00d8\u00ff"===d.substr(0,3)&&"JFIF"===d.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===d.substr(0,8))return"image/png";if("GIF89a"===d.substr(0,6)||"GIF87a"===d.substr(0,6))return"image/gif"},base64DataFromDataURL:function(d){0==d.indexOf("data:")&&(d=d.substr(d.indexOf(",")+
1));return d},getBase64DataIndex:function(d){d=0==d.indexOf("data:")?d.indexOf(";base64,"):-1;return 0<d?d+8:0},getContentType:function(d){var b=f.getBase64DataIndex(d);return b?d.substring(5,b-8):null},checkBase64FileSize:function(d,b){return f.getBase64FileSize(d)<=b},getBase64FileSize:function(d){return.75*d.length},imageToDataURL:function(d,b){b=b||{};var e=document.createElement("canvas"),c=e.getContext("2d");e.width=b.width||d.width;e.height=b.height||d.height;var f=b.opacity;null!=f&&!isNaN(f)&&
0<=f&&1>f&&(c.globalAlpha=+f,b.format="image/png");(f=b.pos)?c.drawImage(d,f.x||0,f.y||0):c.drawImage(d,0,0,e.width,e.height);return e.toDataURL(b.format)},imageFromUrl:function(d,b){var e=new m,c=new Image;0!==d.indexOf("data:")&&b&&b.crossOrigin&&c.setAttribute("crossOrigin",b.crossOrigin);c.onload=function(){if(c.width&&c.height)e.resolve(c);else{var d=Error("Error of reading an image from URL.");b&&b.ignoreError?e.resolve(null):e.reject(d)}c.onload=c.onerror=null};c.onerror=function(d){b&&b.ignoreError?
e.resolve(null):e.reject(d);c.onload=c.onerror=null};d=require.toUrl(d);/^http:/i.test(d)&&/^https/i.test(window.location.protocol)&&(d=k.toHttpsUrl(d));c.src=d;return e.promise},scaleImage:function(d,b){if("string"===typeof d)var e=f.base64DataToDataURL(d),c=f.getContentType(e),e=f.imageFromUrl(e);return h(e||d).then(function(d){var a=1,e=d.width,g=d.height;if(b.factor)a=b.factor;else if(b.maxDim)a=b.maxDim/Math.max(e,g);else if(b.imageDim){var h=b.imageDim.w,k=b.imageDim.h;b.imageDim.preserveRatio?
(a=Math.min(h/e,k/g),b.imageDim.reduceOnly&&1<a&&(a=1)):b.imageDim.reduceOnly?(e=Math.min(e,h),g=Math.min(g,k)):(e=h,g=k)}return f.imageToDataURL(d,{width:e*a,height:g*a,format:b.format||c,opacity:b.opacity})})},getImageViewType:function(d,b){return 1E3<=b?(d/=b,.025>=Math.abs(d-2)?"360":2<d?"pano":null):null}};return f})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url","esri/config","esri/kernel","esri/urlUtils"],function(m,h,k,f){var d={getDomain:function(b){if("string"!==
typeof b)return null;b=b.replace(/^(http:\/\/|https:\/\/)/i,"");var d=b.indexOf("/");return 0>d?b:b.substr(0,d)},getPortalUrl:function(b){if("string"!==typeof b)return null;var d=b;b=b.replace(/^(http:\/\/|https:\/\/)/i,"");d=d.substr(0,d.indexOf(b));return-1!==b.indexOf("/sharing")?d+b.substr(0,b.indexOf("/sharing")):-1!==b.indexOf("/portal")?d+b.substr(0,b.indexOf("/portal"))+"/portal":-1!==b.indexOf("/home")&&b.indexOf("/home")==b.length-5?d+b.substr(0,b.indexOf("/home")):d+b},getProxyUrl:function(b){var e=
h.defaults.io.proxyUrl;e&&!/^http/i.test(e)&&(e=f.getAbsoluteUrl(e));e&&b&&(e=d.toHttpsUrl(e));return e},registerCORS:function(b){(b=d.getDomain(b))&&-1==h.defaults.io.corsEnabledServers.indexOf(b)&&h.defaults.io.corsEnabledServers.push(b);d._fixCORS()},_fixCORS:function(){h.defaults.io.corsEnabledServers=h.defaults.io.corsEnabledServers.filter(function(b){return b.indexOf&&0===b.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+b),!1):!0})},indexOfQuery:function(b){var d=b.indexOf("?");
0<=d&&(b=b.substr(d+1),/^(http:\/\/|https:\/\/)/i.test(b)&&(b=b.indexOf("?"),d=0<=b?d+1+b:-1));return d},removeQuery:function(b){var e=d.indexOfQuery(b);return 0>e?b:b.substr(0,e)},addQueryPart:function(b,e){var c=0>d.indexOfQuery(b)?"?":"\x26";return b+c+e},getVariableValue:function(b,d){if(b&&"string"===typeof d){var c=f.urlToObject(b);if(c.query){var e={};Object.keys(c.query).forEach(function(a){e[a.toLowerCase()]=c.query[a]});return e[d.toLowerCase()]}}},addUrlVariable:function(b,e,c){e=encodeURIComponent(e);
c=encodeURIComponent(c);return d.addQueryPart(b,e+"\x3d"+c)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(b){return!b||/^http/i.test(b)?b:"http://"+b},toHttpsUrl:function(b){b&&(b=d.toHttpUrl(b));if(!b||!/^http:\/\//i.test(b))return b;var e=new m(b);b=b.replace(/^http/i,"https");var c=d.securePortsMap[e.port];c&&(b=b.replace(":"+e.port,":"+c));return b},combine:function(b,e){"number"===typeof e&&(e+="");if(e){if(/^(http:\/\/|https:\/\/)/i.test(e)||!b)return e;"/"!=e.charAt(0)&&(e="/"+
e);if(1==e.length)return b;var c=b.length-1;"/"==b.charAt(c)&&(b=b.substr(0,c));var g=f.urlToObject(b);b=d.removeQuery(b);c=b.length-e.length;0<=c&&b.substr(c).toLowerCase()==e.toLowerCase()&&(b=b.substr(0,c));b+=e;for(var a in g.query)d.addQueryPart(b,g.query[a])}return b},combineMulti:function(b){for(var e=b[0],c=1;c<b.length;c++)e=d.combine(e,b[c]);return e},openUrl:function(b,d){if(d)return window.open(b,"_blank");d=window.open();d.opener=null;d.referrer=null;d.location=b;return d},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},
getToken:function(b){return(b=b&&k.id.findCredential(b)||k.id.credentials[0])&&b.token}};return d})},"widgets/BusinessAnalyst/utils/ReportUtil":function(){define("dojo/Deferred dojo/promise/all dojo/when dojo/_base/array esri/request jimu/portalUtils dojo/i18n!../nls/strings".split(" "),function(m,h,k,f,d,b,e){STANDARD_INFOGRAPHIC_TYPEKEYWORD="esriReportPlayerStandardInfographic";return{_ownedCachedCustomReports:null,_sharedCachedCustomReports:null,_cachedCountryClassicReports:[],_cachedInfographicReports:null,
_countryInitDfds:[],getAvailableClassicReports:function(b,d){var a=this,c=[],g=new m,h;d&&f.forEach(d.countryConfig,function(a){b==a.countryID&&(h=a)});h||(h={countryID:b,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],
enabledOrgInfographics:[]});var t=null,u=null,v=null;k(this._initReports(b),function(){if(!d||h.allowAllEsriReports||a._hasEnabledReports(a._cachedCountryClassicReports[b],h.enabledEsriReports))t=c.length,c.push({value:"esriReports",label:e.esriReports,children:[]});if(!d||h.allowAllOrgReports&&a._hasReportsForCountry(a._ownedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._ownedCachedCustomReports,b,h.enabledOrgReports))u=c.length,c.push({value:"myReports",label:e.myReports,children:[]});
if(!d||h.allowAllOrgReports&&a._hasReportsForCountry(a._sharedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._sharedCachedCustomReports,b,h.enabledOrgReports))v=c.length,c.push({value:"sharedReports",label:e.sharedReports,children:[]});(h.allowAllEsriReports||a._hasEnabledReports(a._cachedCountryClassicReports[b],h.enabledEsriReports))&&a._cachedCountryClassicReports[b]&&0<a._cachedCountryClassicReports[b].length&&f.forEach(a._cachedCountryClassicReports[b],function(b){(h.allowAllEsriReports||
h.enabledEsriReports.includes(b.reportID))&&c[t].children.push(a._formatClassicReportsForDropDown(b))});var l=["esriWebInfographicReport","esriWebSingleInfographic","esriWebBlankInfographic","esriWebHiddenInfographic","esriWebComparisonReport"];(h.allowAllOrgReports&&a._hasReportsForCountry(a._ownedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._ownedCachedCustomReports,b,h.enabledOrgReports))&&f.forEach(a._ownedCachedCustomReports,function(d){d.properties.countries.includes(b)&&(h.allowAllOrgReports||
h.enabledOrgReports.includes(d.id))&&(d.typeKeywords.some(function(a){return 0<=l.indexOf(a)})||c[u].children.push(a._formatClassicReportsForDropDown(d)))});(h.allowAllOrgReports&&a._hasReportsForCountry(a._sharedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._sharedCachedCustomReports,b,h.enabledOrgReports))&&f.forEach(a._sharedCachedCustomReports,function(d){d.properties.countries.includes(b)&&(h.allowAllOrgReports||h.enabledOrgReports.includes(d.id))&&(d.typeKeywords.some(function(a){return 0<=
l.indexOf(a)})||c[v].children.push(a._formatClassicReportsForDropDown(d)))});var n=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<c.length&&c[0].children.sort(n);1<c.length&&c[1].children.sort(n);2<c.length&&c[2].children.sort(n);g.resolve(c)});return g},_hasEnabledReports:function(b,d){return b&&d?f.some(b,function(a){return d.includes(a.reportID)}):!1},_hasReportsForCountry:function(b,d){return b&&d?f.some(b,function(a){return a.properties.countries.includes(d)}):
!1},_hasEnabledReportsForCountry:function(b,d,a){return b&&d&&a?f.some(b,function(b){return b.properties.countries.includes(d)?a.includes(b.id):!1}):!1},_formatClassicReportsForDropDown:function(b){return b.metadata?{label:b.metadata.title,value:b.reportID,reportType:b.metadata.type}:{label:b.title,value:b.id,reportType:b.properties.type,item:{itemid:b.id,url:portalUrl,token:esri.id.credentials[0].token}}},getAvailableInfographicReports:function(b,d){var a=this,c=[],g=new m,h;d&&f.forEach(d.countryConfig,
function(a){b==a.countryID&&(h=a)});h||(h={countryID:b,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],enabledOrgInfographics:[]});var t=null,u=null,v=null;k(this._initReports(b),function(){if(!d||h.allowAllEsriInfographics||
a._hasEnabledInfographics(a._cachedInfographicReports,h.enabledEsriInfographics))t=c.length,c.push({value:"esriReports",label:e.esriInfographics,children:[]});if(!d||h.allowAllOrgInfographics&&0<a._ownedCachedCustomReports.length||a._hasEnabledInfographics(a._ownedCachedCustomReports,h.enabledOrgInfographics))u=c.length,c.push({value:"myReports",label:e.myInfographics,children:[]});if(!d||h.allowAllOrgInfographics&&0<a._sharedCachedCustomReports.length||a._hasEnabledInfographics(a._sharedCachedCustomReports,
h.enabledOrgInfographics))v=c.length,c.push({value:"sharedReports",label:e.sharedInfographics,children:[]});(h.allowAllEsriInfographics||a._hasEnabledInfographics(a._cachedInfographicReports,h.enabledEsriInfographics))&&f.forEach(a._cachedInfographicReports,function(d){d.properties.countries.includes(b)&&(h.allowAllEsriInfographics||h.enabledEsriInfographics.includes(d.id))&&c[t].children.push(a._formatInfographicReportsForDropDown(d))});(h.allowAllOrgInfographics&&0<a._ownedCachedCustomReports.length||
a._hasEnabledInfographics(a._ownedCachedCustomReports,h.enabledOrgInfographics))&&f.forEach(a._ownedCachedCustomReports,function(d){d.properties.countries.includes(b)&&(h.allowAllOrgInfographics||h.enabledOrgInfographics.includes(d.id))&&(d.typeKeywords.includes("esriWebInfographicReport")||a._isOldPortalInfographic(d))&&c[u].children.push(a._formatInfographicReportsForDropDown(d))});(h.allowAllOrgInfographics&&0<a._sharedCachedCustomReports.length||a._hasEnabledInfographics(a._sharedCachedCustomReports,
h.enabledOrgInfographics))&&f.forEach(a._sharedCachedCustomReports,function(d){d.properties.countries.includes(b)&&(h.allowAllOrgInfographics||h.enabledOrgInfographics.includes(d.id))&&(d.typeKeywords.includes("esriWebInfographicReport")||a._isOldPortalInfographic(d))&&c[v].children.push(a._formatInfographicReportsForDropDown(d))});var k=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<c.length&&c[0].children.sort(k);1<c.length&&c[1].children.sort(k);
2<c.length&&c[2].children.sort(k);g.resolve(c)});return g},_hasEnabledInfographics:function(b,d){return f.some(b,function(a){return d.includes(a.id)})},_isOldPortalInfographic:function(b){return b.properties&&b.properties.isHidden&&"true"===b.properties.isHidden?!1:b.properties&&b.properties.isGraphicReport&&"true"===b.properties.isGraphicReport?!0:!1},_formatInfographicReportsForDropDown:function(b){return{label:b.title,value:b.id}},_initReports:function(c){var e=[],a=this;if(this._countryInitDfds[c])return this._countryInitDfds[c];
this._countryInitDfds[c]=new m;var k=function(a,b){return d(a).then(function(c){f.forEach(c.results,function(a){b.push(a)});if(-1!=c.nextStart)return a.content.start=c.nextStart,k(a,b)},function(a){alert(a)})};b.getPortal(portalUrl).loadSelfInfo().then(function(b){var f=b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";a._cachedCountryClassicReports[c]||
e.push(d({url:f+"/Geoenrichment/reports/"+c,content:{appID:"webappbuilder",f:"json",langCode:"en-us"}}).then(function(b){a._cachedCountryClassicReports[c]=b.reports},function(a){alert(a)}));a._cachedInfographicReports||(a._cachedInfographicReports=[],e.push(k({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:"typekeywords:(esriReportPlayerStandardInfographic jsapiVersion3.33)"}},a._cachedInfographicReports)));a._ownedCachedCustomReports||
(a._ownedCachedCustomReports=[],e.push(k({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) owner:'+esri.id.credentials[0].userId}},a._ownedCachedCustomReports)));a._sharedCachedCustomReports||(a._sharedCachedCustomReports=[],e.push(k({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",
sortOrder:"desc",q:'access:shared type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},a._sharedCachedCustomReports)),e.push(k({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:org type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},a._sharedCachedCustomReports)),
b&&b.appInfo&&b.appInfo.orgId&&e.push(k({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:public type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId+" orgid: "+b.id}},a._sharedCachedCustomReports)));0===e.length?a._countryInitDfds[c].resolve():h(e).then(function(){a._countryInitDfds[c].resolve()})});return this._countryInitDfds[c]}}})},
"widgets/BusinessAnalyst/utils/ValidationUtil":function(){define(["dojo/dom-class"],function(m){return{MIN_RINGS_VALUE:0,MAX_RINGS_VALUE:1E3,MIN_DTWT_VALUE:0,MAX_DTWT_VALUE:300,validateInvalidValues:function(h,k,f,d,b){var e=h.get("value"),c=k.get("value"),g=f.get("value"),a=!0;0<e.length&&null===this._tryParseFloat(e)?(a=!1,m.remove(d,"hidden"),d.innerHTML=b,m.add(h.domNode,"invalidValue")):m.remove(h.domNode,"invalidValue");0<c.length&&null===this._tryParseFloat(c)?(a=!1,m.remove(d,"hidden"),d.innerHTML=
b,m.add(k.domNode,"invalidValue")):m.remove(k.domNode,"invalidValue");0<g.length&&null===this._tryParseFloat(g)?(a=!1,m.remove(d,"hidden"),d.innerHTML=b,m.add(f.domNode,"invalidValue")):m.remove(f.domNode,"invalidValue");a&&m.add(d,"hidden");return a},validateMinMaxValues:function(h,k,f,d,b,e,c){var g=h.get("value"),a=k.get("value"),p=f.get("value"),r=!0;0<g.length?(g=parseFloat(g),g<d||g>b?(r=!1,m.remove(e,"hidden"),e.innerHTML=c,m.add(h.domNode,"invalidValue")):m.remove(h.domNode,"invalidValue")):
m.remove(h.domNode,"invalidValue");0<a.length?(g=parseFloat(a),g<d||g>b?(r=!1,m.remove(e,"hidden"),e.innerHTML=c,m.add(k.domNode,"invalidValue")):m.remove(k.domNode,"invalidValue")):m.remove(k.domNode,"invalidValue");0<p.length?(g=parseFloat(p),g<d||g>b?(r=!1,m.remove(e,"hidden"),e.innerHTML=c,m.add(f.domNode,"invalidValue")):m.remove(f.domNode,"invalidValue")):m.remove(f.domNode,"invalidValue");r&&m.add(e,"hidden");return r},_tryParseFloat:function(h){var k=null;null!==h&&0<h.length&&(isNaN(h)||
(k=parseFloat(h)));return k}}})},"widgets/BusinessAnalyst/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/templates/SelectableTreeGrid.html":'\x3cdiv class\x3d"esriMapsAnalystXNonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectionCounter" class\x3d"esriMapsAnalystXSelectableTreeCounter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/Setting.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"reportInfographicTabContainer" style\x3d"width: 100%; height: 520px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"infographicsContentPane" title\x3d"${nls.infographics}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledInfographicsOption"\r\n                        data-dojo-attach-point\x3d"disabledInfographicsOption"\x3e\r\n                    \x3clabel for\x3d"disabledInfographicsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerInfographics"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv\x3e${nls.defineWhichInfographics}\x3c/div\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"infographicTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportsContentPane" title\x3d"${nls.reports}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledReportsOption"\r\n                        data-dojo-attach-point\x3d"disabledReportsOption"\x3e\r\n                    \x3clabel for\x3d"disabledReportsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerReports"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv\x3e${nls.defineWhichReports}\x3c/div\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"reportTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"ringsContentPane" title\x3d"${nls.rings}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.radius}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 1"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 3"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"ringsBufferUnits"\x3e\r\n                    \x3coption value\x3d"esriMiles" selected\x3d"selected"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"ringValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledRingsOption"\r\n                        data-dojo-attach-point\x3d"disabledRingsOption"\x3e\r\n                    \x3clabel for\x3d"disabledRingsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"driveTimeContentPane" title\x3d"${nls.driveTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"driveTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"driveTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"disabledDriveTimeOption"\r\n                        id\x3d"disabledDriveTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledDriveTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"walkTimeContentPane" title\x3d"${nls.walkTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"walkTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"walkTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledWalkTimeOption"\r\n                        data-dojo-attach-point\x3d"disabledWalkTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledWalkTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/css/style.css":'.widget-setting-page .esriMapsAnalystXSelectableTreeGrid.dgrid {position: absolute; top: 33px; right: 0; left: 0px; bottom: 0; height: auto; width: auto;}.jimu-widget-business-analyst-setting .tabs {font-family: "Avenir Light"; color: #000000; height: 100%;} .jimu-widget-business-analyst-setting .tabs .tab-description {margin: 10px 0;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 14px;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 3px solid #24b5cc; font-family: "Avenir Heavy"; color: #000000;} .jimu-widget-business-analyst-setting .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 14px; margin: 20px 0 10px 0;} .jimu-widget-business-analyst-setting .tabs .hide{display: none;} .jimu-widget-business-analyst-setting .tabs .indent{margin-left: 20px; margin-top: 10px;} .jimu-widget-business-analyst-setting .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;} .jimu-widget-business-analyst-setting .tabs .clearFix {*overflow: hidden; *zoom: 1;} .jimu-widget-business-analyst-setting .tabs .clearFix:after {display: table; content: ""; width: 0; clear: both;} .jimu-widget-business-analyst-setting .tabs .view{height: 100%; overflow-y: auto;} .jimu-widget-business-analyst-setting .tabs .jimu-tab\x3e.jimu-viewstack{padding-bottom: 30px;} .jimu-widget-business-analyst-setting .validationErrorMessage {color: #FF0000; margin-top: 10px;} .jimu-widget-business-analyst-setting .validationErrorMessage.hidden {display: none;} .jimu-widget-business-analyst-setting .invalidValue {outline: 3px solid #FF0000;} .jimu-widget-business-analyst-setting .makeDefaultLink {cursor: pointer!important; color: #0079c1;} .jimu-widget-business-analyst-setting .makeDefaultLink:hover {text-decoration: underline; text-decoration-color: #0079c1;} .jimu-widget-business-analyst-setting .esriMapsAnalystXSelectableTreeLabel.default {color: #0079c1;}',
"*now":function(m){m(['dojo/i18n!*preload*widgets/BusinessAnalyst/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-style dojo/mouse dojo/on jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin esri/dijit/geoenrichment/SelectableTree ../esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid ../utils/GEUtil ../utils/ReportUtil ../utils/ValidationUtil jimu/dijit/formSelect jimu/dijit/TabContainer dijit/form/CheckBox dijit/layout/ContentPane".split(" "),function(m,h,k,f,d,b,e,c,g,a,p,r,l,t,u,v){return h([c,g],{baseClass:"jimu-widget-business-analyst-setting",
selectedCountryID:"",currentDefaultInfographicID:"",currentDefaultInfographicDiv:null,currentDefaultReportID:"",currentDefaultReportDiv:null,postCreate:function(){this.inherited(arguments);this.tab=new v({tabs:[{title:this.nls.infographics,content:this.infographicsContentPane},{title:this.nls.reports,content:this.reportsContentPane},{title:this.nls.rings,content:this.ringsContentPane},{title:this.nls.driveTime,content:this.driveTimeContentPane},{title:this.nls.walkTime,content:this.walkTimeContentPane}],
selected:this.nls.infographics});this.tab.placeAt(this.reportInfographicTabContainer);this.tab.startup()},startup:function(){this._started||(this.inherited(arguments),this.setConfig(this.config))},setConfig:function(a){var b=this;r.getAvailableCountries().then(function(a){var c=[];m.forEach(a.countries,function(a){c.push({label:a.name,value:a.id,selected:a.id==b.config.defaultCountryID?"selected":""})});b.countryDropDownInfographics=(new u({options:c})).placeAt(b.countryDropDownContainerInfographics);
b.countryDropDownInfographics.startup();b.selectedCountryID=b.countryDropDownInfographics.get("value");e(b.countryDropDownInfographics,"change",function(){b._countryChangeInfographics()});b.countryDropDownReports=(new u({options:c})).placeAt(b.countryDropDownContainerReports);b.countryDropDownReports.startup();b.selectedCountryID=b.countryDropDownReports.get("value");e(b.countryDropDownReports,"change",function(){b._countryChangeReports()});b._loadConfigForCountry(b.selectedCountryID)});this._loadRingDTWTConfig()},
getConfig:function(){if(!this._validateRingDTWT())return!1;this._setConfigForCountry(this.selectedCountryID);this._setRingDTWTConfig();this.config.defaultCountryID=this.selectedCountryID;return this.config},_countryChangeInfographics:function(){this.countryDropDownReports.get("value")!=this.countryDropDownInfographics.get("value")&&(this.countryDropDownReports.set("value",this.countryDropDownInfographics.get("value")),this._countryChange())},_countryChangeReports:function(){this.countryDropDownInfographics.get("value")!=
this.countryDropDownReports.get("value")&&(this.countryDropDownInfographics.set("value",this.countryDropDownReports.get("value")),this._countryChange())},_countryChange:function(){this._setConfigForCountry(this.selectedCountryID);this.selectedCountryID=this.countryDropDownInfographics.get("value");this._loadConfigForCountry(this.selectedCountryID)},_setConfigForCountry:function(a){var b=null;m.forEach(this.config.countryConfig,function(c){c.countryID==a&&(b=c)});b||(b={countryID:a,allowEsriReports:!0,
allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],enabledOrgInfographics:[]});b.allowEsriInfographics=0<this.infographicsTreeGrid.tree.data[0].leafCount?0!=this.infographicsTreeGrid.tree.data[0].selectCount:!0;b.allowMyInfographics=
0<this.infographicsTreeGrid.tree.data[1].leafCount?0!=this.infographicsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedInfographics=0<this.infographicsTreeGrid.tree.data[2].leafCount?0!=this.infographicsTreeGrid.tree.data[2].selectCount:!0;b.allowAllEsriInfographics=this.infographicsTreeGrid.tree.data[0].leafCount===this.infographicsTreeGrid.tree.data[0].selectCount;b.allowAllOrgInfographics=this.infographicsTreeGrid.tree.data[1].leafCount===this.infographicsTreeGrid.tree.data[1].selectCount&&this.infographicsTreeGrid.tree.data[2].leafCount===
this.infographicsTreeGrid.tree.data[2].selectCount;b.allowAllEsriInfographics||(b.enabledEsriInfographics=this._getEnabledReports(this.infographicsTreeGrid.tree.data[0].children));b.allowAllOrgInfographics||(b.enabledOrgInfographics=this._getEnabledReports(this.infographicsTreeGrid.tree.data[1].children.concat(this.infographicsTreeGrid.tree.data[2].children)));b.defaultInfographicID=this.currentDefaultInfographicID;b.allowEsriReports=0<this.reportsTreeGrid.tree.data[0].leafCount?0!=this.reportsTreeGrid.tree.data[0].selectCount:
!0;b.allowMyReports=0<this.reportsTreeGrid.tree.data[1].leafCount?0!=this.reportsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedReports=0<this.reportsTreeGrid.tree.data[2].leafCount?0!=this.reportsTreeGrid.tree.data[2].selectCount:!0;b.allowAllEsriReports=this.reportsTreeGrid.tree.data[0].leafCount===this.reportsTreeGrid.tree.data[0].selectCount;b.allowAllOrgReports=this.reportsTreeGrid.tree.data[1].leafCount===this.reportsTreeGrid.tree.data[1].selectCount&&this.reportsTreeGrid.tree.data[2].leafCount===
this.reportsTreeGrid.tree.data[2].selectCount;b.allowAllEsriReports||(b.enabledEsriReports=this._getEnabledReports(this.reportsTreeGrid.tree.data[0].children));b.allowAllOrgReports||(b.enabledOrgReports=this._getEnabledReports(this.reportsTreeGrid.tree.data[1].children.concat(this.reportsTreeGrid.tree.data[2].children)));b.defaultReportID=this.currentDefaultReportID;var c=-1;m.forEach(this.config.countryConfig,function(b,d){b.countryID==a&&(c=d)});-1!=c?this.config.countryConfig[c]=b:this.config.countryConfig.push(b)},
_loadConfigForCountry:function(c){var g=this;l.getAvailableInfographicReports(c).then(function(h){m.forEach(h,function(a){m.forEach(a.children,function(a){a.selected=!0})});g.infographicsTreeGrid||(g.infographicsTreeGrid=new p({tree:new a(h),showHeader:!1,_renderLabelNode:function(a,c){var h=f.create("div"),l=f.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a),style:"float: left"},h);if(1===a.deepness){a.value===g.currentDefaultInfographicID&&(k.add(l,
"default"),g.currentDefaultInfographicDiv=l);var m=f.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",innerHTML:g.nls.makeDefault,style:"margin-left: 10px; display: none"},h),n=f.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",innerHTML:g.nls.removeDefault,style:"margin-left: 10px; display: none"},h);a.makeDefaultDiv=m;a.unselectDefaultDiv=n;e(m,"click",function(b){b.stopPropagation();g.currentDefaultInfographicDiv&&k.remove(g.currentDefaultInfographicDiv,
"default");k.add(l,"default");g.currentDefaultInfographicID=a.value;g.currentDefaultInfographicDiv=l;d.set(m,"display","none");d.set(n,"display","")});e(n,"click",function(a){a.stopPropagation();g.currentDefaultInfographicDiv&&k.remove(g.currentDefaultInfographicDiv,"default");g.currentDefaultInfographicID="";g.currentDefaultInfographicDiv=null;d.set(n,"display","none");d.set(m,"display","")});e(c,b.enter,function(){a.selected&&(a.value!==g.currentDefaultInfographicID?d.set(m,"display",""):d.set(n,
"display",""))});e(c,b.leave,function(){d.set(m,"display","none");d.set(n,"display","none")})}return h}},g.infographicTreeGridContainer));g.own(e(g.infographicsTreeGrid,"SelectionChanged",function(a){a.toggledTreeNode&&0==a.toggledTreeNode.deepness?a.toggledTreeNode.selected||m.forEach(a.toggledTreeNode.children,function(a){a.value===g.currentDefaultInfographicID&&g.currentDefaultInfographicDiv&&(k.remove(g.currentDefaultInfographicDiv,"default"),g.currentDefaultInfographicID="",g.currentDefaultInfographicDiv=
null)}):a.toggledTreeNode&&!a.toggledTreeNode.selected&&a.toggledTreeNode.value===g.currentDefaultInfographicID?g.currentDefaultInfographicDiv&&(k.remove(g.currentDefaultInfographicDiv,"default"),g.currentDefaultInfographicID="",g.currentDefaultInfographicDiv=null,d.set(a.toggledTreeNode.makeDefaultDiv,"display","none"),d.set(a.toggledTreeNode.unselectDefaultDiv,"display","none")):a.toggledTreeNode&&!a.toggledTreeNode.selected?d.set(a.toggledTreeNode.makeDefaultDiv,"display","none"):a.toggledTreeNode&&
a.toggledTreeNode.selected&&d.set(a.toggledTreeNode.makeDefaultDiv,"display","")}));var l=-1;m.forEach(g.config.countryConfig,function(a,b){a.countryID==c&&(l=b)});g.currentDefaultInfographicID="";g.currentDefaultReportID="";-1!=l&&(g.currentDefaultInfographicID=g.config.countryConfig[l].defaultInfographicID,g.currentDefaultReportID=g.config.countryConfig[l].defaultReportID,g.config.countryConfig[l].allowAllEsriInfographics||m.forEach(h[0].children,function(a){m.some(g.config.countryConfig[l].enabledEsriInfographics,
function(b){return a.value===b})||(a.selected=!1)}),g.config.countryConfig[l].allowAllOrgInfographics||m.forEach(h[1].children.concat(h[2].children),function(a){m.some(g.config.countryConfig[l].enabledOrgInfographics,function(b){return a.value===b})||(a.selected=!1)}));g.infographicsTreeGrid.tree.clear();g.infographicsTreeGrid.tree.addNodes(h)});l.getAvailableClassicReports(c).then(function(h){m.forEach(h,function(a){m.forEach(a.children,function(a){a.selected=!0})});g.reportsTreeGrid||(g.reportsTreeGrid=
new p({tree:new a(h),showHeader:!1,_renderLabelNode:function(a,c){var h=f.create("div"),l=f.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a),style:"float: left"},h);if(1===a.deepness){a.value===g.currentDefaultReportID&&(k.add(l,"default"),g.currentDefaultReportDiv=l);var m=f.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",innerHTML:g.nls.makeDefault,style:"margin-left: 10px; display: none"},h),n=f.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",
innerHTML:g.nls.removeDefault,style:"margin-left: 10px; display: none"},h);a.makeDefaultDiv=m;a.unselectDefaultDiv=n;e(m,"click",function(b){b.stopPropagation();g.currentDefaultReportDiv&&k.remove(g.currentDefaultReportDiv,"default");k.add(l,"default");g.currentDefaultReportID=a.value;g.currentDefaultReportDiv=l;d.set(m,"display","none");d.set(n,"display","")});e(n,"click",function(a){a.stopPropagation();g.currentDefaultReportDiv&&k.remove(g.currentDefaultReportDiv,"default");g.currentDefaultReportID=
"";g.currentDefaultReportDiv=null;d.set(n,"display","none");d.set(m,"display","")});e(c,b.enter,function(){a.selected&&(a.value!==g.currentDefaultReportID?d.set(m,"display",""):d.set(n,"display",""))});e(c,b.leave,function(){d.set(m,"display","none");d.set(n,"display","none")})}return h}},g.reportTreeGridContainer));g.own(e(g.reportsTreeGrid,"SelectionChanged",function(a){a.toggledTreeNode&&0==a.toggledTreeNode.deepness?a.toggledTreeNode.selected||m.forEach(a.toggledTreeNode.children,function(a){a.value===
g.currentDefaultReportID&&g.currentDefaultReportDiv&&(k.remove(g.currentDefaultReportDiv,"default"),g.currentDefaultReportID="",g.currentDefaultReportDiv=null)}):a.toggledTreeNode&&!a.toggledTreeNode.selected&&a.toggledTreeNode.value===g.currentDefaultReportID?g.currentDefaultReportDiv&&(k.remove(g.currentDefaultReportDiv,"default"),g.currentDefaultReportID="",g.currentDefaultReportDiv=null,d.set(a.toggledTreeNode.makeDefaultDiv,"display","none"),d.set(a.toggledTreeNode.unselectDefaultDiv,"display",
"none")):a.toggledTreeNode&&!a.toggledTreeNode.selected?d.set(a.toggledTreeNode.makeDefaultDiv,"display","none"):a.toggledTreeNode&&a.toggledTreeNode.selected&&d.set(a.toggledTreeNode.makeDefaultDiv,"display","")}));var l=-1;m.forEach(g.config.countryConfig,function(a,b){a.countryID==c&&(l=b)});-1!=l&&(g.config.countryConfig[l].allowAllEsriReports||m.forEach(h[0].children,function(a){m.some(g.config.countryConfig[l].enabledEsriReports,function(b){return a.value===b})||(a.selected=!1)}),g.config.countryConfig[l].allowAllEsriInfographics||
m.forEach(h[1].children.concat(h[2].children),function(a){m.some(g.config.countryConfig[l].enabledOrgReports,function(b){return a.value===b})||(a.selected=!1)}));g.reportsTreeGrid.tree.clear();g.reportsTreeGrid.tree.addNodes(h)})},_getClassicReportId:function(a){return a.value&&a.value.itemid?a.value.itemid:a.value},_getEnabledReports:function(a){var b=[];m.forEach(a,function(a){a.selected&&(a.value&&a.value.itemid?b.push(a.value.itemid):b.push(a.value))});return b},_setRingDTWTConfig:function(){this.config.ringDefaults=
this._getRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3);this.config.driveTimeDefaults=this._getRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3);this.config.walkTimeDefaults=this._getRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3);this.config.ringUnitDefault=this.ringsBufferUnits.get("value");this.config.driveTimeUnitDefault=this.driveTimeBufferUnits.get("value");this.config.walkTimeUnitDefault=
this.walkTimeBufferUnits.get("value");this.config.ringDisabled=this.disabledRingsOption.checked;this.config.driveTimeDisabled=this.disabledDriveTimeOption.checked;this.config.walkTimeDisabled=this.disabledWalkTimeOption.checked;this.config.infographicsDisabled=this.disabledInfographicsOption.checked;this.config.reportsDisabled=this.disabledReportsOption.checked},_loadRingDTWTConfig:function(){this._setRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,this.config.ringDefaults);
this.ringsBufferUnits.set("value",this.config.ringUnitDefault);this.disabledRingsOption.setChecked(this.config.ringDisabled);this._setRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.config.driveTimeDefaults);this.driveTimeBufferUnits.set("value",this.config.driveTimeUnitDefault);this.disabledDriveTimeOption.setChecked(this.config.driveTimeDisabled);this._setRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.config.walkTimeDefaults);
this.walkTimeBufferUnits.set("value",this.config.walkTimeUnitDefault);this.disabledWalkTimeOption.setChecked(this.config.walkTimeDisabled);this.disabledInfographicsOption.setChecked(this.config.infographicsDisabled);this.disabledReportsOption.setChecked(this.config.reportsDisabled)},_getRadii:function(a,b,c){a=a.get("value");b=b.get("value");c=c.get("value");var d=[];""!=a&&d.push(a);""!=b&&d.push(b);""!=c&&d.push(c);return d},_setRadii:function(a,b,c,d){0<d.length?a.set("value",d[0]):a.set("value",
"");1<d.length?b.set("value",d[1]):b.set("value","");2<d.length?c.set("value",d[2]):c.set("value","")},_validateRingDTWT:function(){var a=!0,b=!0,c=!1,b=a=t.validateInvalidValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,this.ringValidationErrorMessage,this.nls.thisEntryIsNotValid);a||(this.tab.selectTab(this.nls.rings),c=!0);a=t.validateInvalidValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.driveTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);
b=b&&a;a||c||(this.tab.selectTab(this.nls.driveTime),c=!0);a=t.validateInvalidValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.walkTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);b=b&&a;a||c||(this.tab.selectTab(this.nls.walkTime),c=!0);if(!b)return b;tabChange=!1;b=a=t.validateMinMaxValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,t.MIN_RINGS_VALUE,t.MAX_RINGS_VALUE,this.ringValidationErrorMessage,this.nls.invalidValueRing);
a||(this.tab.selectTab(this.nls.rings),c=!0);a=t.validateMinMaxValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,t.MIN_DTWT_VALUE,t.MAX_DTWT_VALUE,this.driveTimeValidationErrorMessage,this.nls.invalidValueDTWT);b=b&&a;a||c||(this.tab.selectTab(this.nls.driveTime),c=!0);a=t.validateMinMaxValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,t.MIN_DTWT_VALUE,t.MAX_DTWT_VALUE,this.walkTimeValidationErrorMessage,this.nls.invalidValueDTWT);
b=b&&a;a||c||(this.tab.selectTab(this.nls.walkTime),c=!0);return b}})});